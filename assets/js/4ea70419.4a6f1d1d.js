"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[63877],{57063:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>u,metadata:()=>p,toc:()=>c});r(67294);var n=r(3905),a=r(86291);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const u={sidebar_position:1,title:"Query Builder"},s=void 0,p={unversionedId:"reference/controls/query-builder",id:"reference/controls/query-builder",title:"Query Builder",description:"The Query Builder control empowers you to create custom queries for situations requiring server-side filtering, utilizing criteria defined during runtime. By integrating it with your connectors, you can dynamically select and apply queries to your data sources. This advantageously enables dynamic filtering for controls like Table Grid and List controls, ensuring efficient data retrieval based on specific criteria.",source:"@site/docs/reference/controls/query-builder.md",sourceDirName:"reference/controls",slug:"/reference/controls/query-builder",permalink:"/reference/controls/query-builder",draft:!1,tags:[],version:"current",lastUpdatedAt:1715863743,formattedLastUpdatedAt:"May 16, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Query Builder"},sidebar:"docSidebar",previous:{title:"Quantity",permalink:"/reference/controls/quantity"},next:{title:"Questionnaire",permalink:"/reference/controls/questionnair"}},d={},c=[{value:"Define Schema",id:"define-schema",level:2},{value:"Binding Data Options",id:"binding-data-options",level:2},{value:"RAW_JSON",id:"raw_json",level:3},{value:"Query",id:"query",level:3},{value:"Properties",id:"properties",level:2},{value:"Control Output",id:"control-output",level:2},{value:"Events",id:"events",level:2}],m={toc:c},y="wrapper";function h(e){var{components:t}=e,r=l(e,["components"]);return(0,n.kt)(y,o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},m,r),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"The Query Builder control empowers you to create custom queries for situations requiring server-side filtering, utilizing criteria defined during runtime. By integrating it with your connectors, you can dynamically select and apply queries to your data sources. This advantageously enables dynamic filtering for controls like Table Grid and List controls, ensuring efficient data retrieval based on specific criteria."),(0,n.kt)("figure",null,(0,n.kt)(a.Z,{src:"/img/reference/controls/query-builder/preview.jpeg",alt:"Query Builder",mdxType:"Thumbnail"}),(0,n.kt)("figcaption",{align:"center"},(0,n.kt)("i",null,"Query Builder"))),(0,n.kt)("h2",{id:"define-schema"},"Define Schema"),(0,n.kt)("p",null,"You can define your Query Builder schema either statically using ",(0,n.kt)("inlineCode",{parentName:"p"},"Properties")," section or dynamically using ",(0,n.kt)("inlineCode",{parentName:"p"},"Bind Data -> Schema")," option. Schema binding allows you to specify the structure of your query that can be build using Query Builder control keeping data type of the data as defined in schema. This allows Query Builder to provide options in rules according to data defined in Schema."),(0,n.kt)("p",null,"Here's how you can use schema binding:"),(0,n.kt)("p",null,"Use JSON notation to define the structure of your data. Include key-value pairs to represent each field along with its data type. For example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "ProductName": "string",\n  "ProductID": "string",\n  "Price": "number",\n  "Quantity": "number"\n}\n')),(0,n.kt)("p",null,"You can alternatively use the Bind Data Section to bind the schema to the control with above format. This allows the control to fetch data dynamically from data queries, sheets, or custom functions and display it according to the specified schema."),(0,n.kt)("h2",{id:"binding-data-options"},"Binding Data Options"),(0,n.kt)("p",null,"The Query Builder control provides either of the two methods to initialize a query from the start:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"#raw_json"},"RAW JSON")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"#query"},"Query"))),(0,n.kt)("p",null,"Additionally, you can define the schema structure during initialization using:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#define-schema"},"Schema"))),(0,n.kt)("h3",{id:"raw_json"},"RAW_JSON"),(0,n.kt)("p",null,"Provide a RAW JSON in below format to initialize the Query Control with preset rules and orderBy clauses. This allows for precise control over the query structure, enabling you to define complex filter conditions in detail right at the initialization of the control."),(0,n.kt)("p",null,"Sample RAW JSON:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "id": "g-RQpZdXIWdZhAmFoJO",\n    "rules": [],\n    "orderBy": [\n        {\n            "id": "o-RvsitaQBPeStckGkC",\n            "field": "username",\n            "direction": "asc"\n        }\n    ],\n    "combinator": "AND"\n}\n')),(0,n.kt)("p",null,"However, you can also dynamically fetch this data using Bind options by retrieving information from ",(0,n.kt)("inlineCode",{parentName:"p"},"Data queries"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"Sheets"),", or ",(0,n.kt)("inlineCode",{parentName:"p"},"Custom functions")," and binding the response to the Data Bind option."),(0,n.kt)("h3",{id:"query"},"Query"),(0,n.kt)("p",null,"You can also, alternatively provide Query option instead of RAW JSON to initialize the Query Control with preset rules and orderBy clauses. It provides a more user-friendly approach to initialize query control. This simplifies the overall process to directly provide query to the control when it gets start. So whatever query the user put in the data bind section, it will reflect in the control as pre-provided conditions/query."),(0,n.kt)("p",null,"Let's walk through creating a query to fetch data from a MySQL employees table where the verification field is null. This scenario assumes you have a database with an ",(0,n.kt)("inlineCode",{parentName:"p"},"employees")," table containing fields like ",(0,n.kt)("inlineCode",{parentName:"p"},"id"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"age"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"department"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"verification"),". The goal is to use a Query Builder to filter out employees who haven't completed verification."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Define Query for MySQL Connector from data:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM employees {{condition}}\n")),(0,n.kt)("p",{parentName:"li"}," In the above, query we are having a variable of ",(0,n.kt)("inlineCode",{parentName:"p"},"condition")," which will eventually hold the condition of our Query Builder control")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Configure Control data with the query to passed"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"WHERE `verfication` IS  NULL\n"))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Now let's bind the data to a control, whose data we will fetch from the database using our condition query from the control. "))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"We can bind Data to TableGrid Control:"),(0,n.kt)("li",{parentName:"ul"},"While binding, use the ",(0,n.kt)("inlineCode",{parentName:"li"},"querybuilder.Query")," keyword to replace the condition variable in the SQL connector query.")),(0,n.kt)("figure",null,(0,n.kt)(a.Z,{src:"/img/reference/controls/query-builder/query.jpeg",alt:"Dynamic Operator",mdxType:"Thumbnail"})),(0,n.kt)("h2",{id:"properties"},"Properties"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Property"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Database"),(0,n.kt)("td",{parentName:"tr",align:null},"Specifies the type of database (SQL or NoSQL) for sending the query. When using NoSQL, Dynamic Operators can be added.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Theme"),(0,n.kt)("td",{parentName:"tr",align:null},"Defines the color scheme or theme for the composite control.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Schema"),(0,n.kt)("td",{parentName:"tr",align:null},"JSON format containing fields available for use in the query builder.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Order By"),(0,n.kt)("td",{parentName:"tr",align:null},"Toggles the option to include sorting criteria in the query results.")))),(0,n.kt)("p",null,"And here's an example of the Schema for a Product data use case:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "label": "Product Name",\n    "value": "ProductName",\n    "enum": [\n      {\n        "label": "Sandwich",\n        "value": "Sandwich"\n      },\n      {\n        "label": "Burger",\n        "value": "Burger"\n      },\n      {\n        "label": "All",\n        "value": ""\n      }\n    ]\n  },\n  {\n    "label": "Product ID",\n    "value": "ProductID"\n  },\n  {\n    "label": "Price",\n    "value": "Price",\n    "type": "number"\n  },\n  {\n    "label": "Prod Quantity",\n    "value": "Quantity"\n  }\n]\n')),(0,n.kt)("p",null,"Dynamic Operators"),(0,n.kt)("p",null,"The Dynamic Operators feature in the Query Builder control allows you to add custom operators that are not available by default. This enables you to define specific operators for different types of data you use in your application. You can easily customize the operators to support String type data within DronaHQ."),(0,n.kt)("p",null,"Key Points:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"For String type data, the control automatically adds double quotes to the value field in the resolved output JSON query.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"For other data types, you must provide a value that is supported in your NoSQL parameter. For instance, the $all operator expects an array type in the value field, so it's essential to provide an array value in the query control."))),(0,n.kt)("p",null,"To add your specific operators, go to the Dynamic Operator section under Properties, and customize the operators to support String type data in DronaHQ."),(0,n.kt)("figure",null,(0,n.kt)(a.Z,{src:"/img/reference/controls/query-builder/example-1.jpeg",alt:"Dynamic Operator",mdxType:"Thumbnail"}),(0,n.kt)("figcaption",{align:"center"},(0,n.kt)("i",null,"Dynamic Operator"))),(0,n.kt)("p",null,"Whenever you run the form and create queries using the additional operators, you will see them listed for String type data. For example, in the illustration provided, the query is built for the Product ID using the $Exists operator."),(0,n.kt)("p",null,"By leveraging Dynamic Operators, you gain more flexibility and control over your queries, allowing you to tailor them to the specific needs of your application."),(0,n.kt)("p",null,"Dynamic Operators Example:"),(0,n.kt)("p",null,"Query:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "ProductID": {\n    "$Exists": true\n  }\n}\n')),(0,n.kt)("p",null,"In this example, the query uses the $Exists operator to check if the Product ID exists in the data."),(0,n.kt)("figure",null,(0,n.kt)(a.Z,{src:"/img/reference/controls/query-builder/example-2.jpeg",alt:"Query Builder",mdxType:"Thumbnail"})),(0,n.kt)("h2",{id:"control-output"},"Control Output"),(0,n.kt)("p",null,"The outputs from the Query Builder control, represented by the placeholders ",(0,n.kt)("inlineCode",{parentName:"p"},"{{querybuilder.Raw_JSON}}")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"{{querybuilder.Query}}"),", can be referenced in other controls, data queries, or JavaScript functions using the control's unique name."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Output"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"querybuilder.Raw_JSON"),(0,n.kt)("td",{parentName:"tr",align:null},"Represents the query in RAW_JSON format, providing precise control over the query structure.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"querybuilder.Query"),(0,n.kt)("td",{parentName:"tr",align:null},"Represents the query in a user-friendly format, simplifying the process of building complex queries.")))),(0,n.kt)("h2",{id:"events"},"Events"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Trigger"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"On_apply"),(0,n.kt)("td",{parentName:"tr",align:null},"Triggered when you select the query parameters and click the Apply button to apply the specified filters or search criteria.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"On_clear"),(0,n.kt)("td",{parentName:"tr",align:null},"Triggered when you click the clear button to reset or remove any applied filters, returning the data to its original state.")))))}h.isMDXComponent=!0}}]);