"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[75700],{46224:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>d,default:()=>k,frontMatter:()=>s,metadata:()=>c,toc:()=>u});n(67294);var a=n(3905),r=n(86291);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const s={sidebar_position:1,title:"Notion"},d=void 0,c={unversionedId:"reference/connectors/notion",id:"reference/connectors/notion",title:"Notion",description:"Notion is a commonly used workspace tool that allows teams to collaborate on notes, tasks, projects, and databases. DronaHQ supports integration very quickly with Notion, enabling users to automate workflows, fetch data, and interact with Notion databases, and much more, using multiple endpoints which users can apply directly within their apps built on DronaHQ.",source:"@site/docs/reference/connectors/notion.md",sourceDirName:"reference/connectors",slug:"/reference/connectors/notion",permalink:"/reference/connectors/notion",draft:!1,tags:[],version:"current",lastUpdatedAt:1730708048,formattedLastUpdatedAt:"Nov 4, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Notion"},sidebar:"docSidebar",previous:{title:"MySQL",permalink:"/reference/connectors/mysql"},next:{title:"OCRSpace",permalink:"/reference/connectors/ocrspace"}},p={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Notion API Key:",id:"notion-api-key",level:4},{value:"Integrate connection with Notion Page",id:"integrate-connection-with-notion-page",level:4},{value:"Configuring API Connector in DronaHQ",id:"configuring-api-connector-in-dronahq",level:2},{value:"Supported API endpoints",id:"supported-api-endpoints",level:2},{value:"Using Notion connector",id:"using-notion-connector",level:2},{value:"Retrieving a Database",id:"retrieving-a-database",level:3},{value:"Create a Query",id:"create-a-query",level:3},{value:"Data Transformation on Notion response",id:"data-transformation-on-notion-response",level:3},{value:"JavaScript Code Example",id:"javascript-code-example",level:4},{value:"Explanation of the Code:",id:"explanation-of-the-code",level:4}],m={toc:u},b="wrapper";function k(e){var{components:t}=e,n=l(e,["components"]);return(0,a.kt)(b,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}({},m,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Notion is a commonly used workspace tool that allows teams to collaborate on notes, tasks, projects, and databases. DronaHQ supports integration very quickly with Notion, enabling users to automate workflows, fetch data, and interact with Notion databases, and much more, using multiple endpoints which users can apply directly within their apps built on DronaHQ."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("h4",{id:"notion-api-key"},"Notion API Key:"),(0,a.kt)("p",null,"Obtain an API key by signing up for a Notion Developer account and creating an ",(0,a.kt)("a",{parentName:"p",href:"https://www.notion.so/profile/integrations"},"integration"),". This key is necessary to authenticate requests when using the Notion Connector."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/connectors/notion/notion-key.jpeg",alt:"Notion Integration - Key",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Notion Integration - Key"))),(0,a.kt)("h4",{id:"integrate-connection-with-notion-page"},"Integrate connection with Notion Page"),(0,a.kt)("p",null,"Once the API key is obtained, after creating an integration, there is a need to connect the pages of Notion with the integration, whose API key will be used in DronaHQ.\nSelect the page and click on the three dots, from there under ",(0,a.kt)("inlineCode",{parentName:"p"},"connection")," connect with the created integration."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/connectors/notion/connect-to.png",alt:"Notion Page connect with Integration",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Notion Page connect with Integration"))),(0,a.kt)("h2",{id:"configuring-api-connector-in-dronahq"},"Configuring API Connector in DronaHQ"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create a name for your Notion connector."),(0,a.kt)("li",{parentName:"ol"},"Enter the API key generated from your Notion Developer account into the connector setup."),(0,a.kt)("li",{parentName:"ol"},"Once all details are provided, click Save to complete the connector configuration.")),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/connectors/notion/notion-config.jpeg",alt:"Notion Connector Configuration",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Notion Connector Configuration"))),(0,a.kt)("h2",{id:"supported-api-endpoints"},"Supported API endpoints"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Action"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveBotUserInfo"),(0,a.kt)("td",{parentName:"tr",align:null},"Retrieves information about the bot user in the workspace.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"ListAllUsers"),(0,a.kt)("td",{parentName:"tr",align:null},"Lists all users in the Notion workspace.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveAUser"),(0,a.kt)("td",{parentName:"tr",align:null},"Retrieves details of a specific user by ID.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveADatabase"),(0,a.kt)("td",{parentName:"tr",align:null},"Fetches details of a specific database in Notion.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CreateADatabase"),(0,a.kt)("td",{parentName:"tr",align:null},"Creates a new database within the workspace.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"UpdateADatabase"),(0,a.kt)("td",{parentName:"tr",align:null},"Updates the properties of an existing database.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"QueryADatabase"),(0,a.kt)("td",{parentName:"tr",align:null},"Queries a Notion database to retrieve filtered data.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveAPage"),(0,a.kt)("td",{parentName:"tr",align:null},"Fetches information about a specific page by ID.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveAPagePropertyItem"),(0,a.kt)("td",{parentName:"tr",align:null},"Retrieves specific property values from a Notion page.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CreateAPage"),(0,a.kt)("td",{parentName:"tr",align:null},"Creates a new page in a database or as a standalone page.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"UpdatePageProperties"),(0,a.kt)("td",{parentName:"tr",align:null},"Updates the properties of an existing page.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"SearchByTitle"),(0,a.kt)("td",{parentName:"tr",align:null},"Searches for pages or databases by title.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveComments"),(0,a.kt)("td",{parentName:"tr",align:null},"Retrieves comments associated with a page or block.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CreateComment"),(0,a.kt)("td",{parentName:"tr",align:null},"Adds a comment to a page or block.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveABlock"),(0,a.kt)("td",{parentName:"tr",align:null},"Fetches a specific block (content item) by ID.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"RetrieveBlockChildren"),(0,a.kt)("td",{parentName:"tr",align:null},"Retrieves children (nested blocks) within a parent block.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"DeleteABlock"),(0,a.kt)("td",{parentName:"tr",align:null},"Deletes a specific block by ID.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"UpdateABlock"),(0,a.kt)("td",{parentName:"tr",align:null},"Updates the content of a block.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"AppendBlockChildren"),(0,a.kt)("td",{parentName:"tr",align:null},"Adds new children blocks to an existing parent block.")))),(0,a.kt)("h2",{id:"using-notion-connector"},"Using Notion connector"),(0,a.kt)("h3",{id:"retrieving-a-database"},"Retrieving a Database"),(0,a.kt)("p",null,"Let's explore how to use Notion connector endpoints to fetch details from a database or page in Notion. You can call the query from data queries or trigger it through an action flow initiated by an event. First, you will need to select the environment and account whose API will be called."),(0,a.kt)("p",null,"Next, provide the variable details:"),(0,a.kt)("p",null,"Here's a table outlining the variables and their descriptions for retrieving a database from Notion:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Variable"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Notion-Version"),(0,a.kt)("td",{parentName:"tr",align:null},"The version of the Notion API you are using (e.g., ",(0,a.kt)("inlineCode",{parentName:"td"},"2022-06-28"),"). This ensures compatibility with the API endpoints.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Database ID"),(0,a.kt)("td",{parentName:"tr",align:null},"The unique identifier for the Notion database you want to retrieve. To find this, open the database as a full page in Notion and extract the ",(0,a.kt)("inlineCode",{parentName:"td"},"{database_id}")," from the URL format: ",(0,a.kt)("inlineCode",{parentName:"td"},"https://www.notion.so/{workspace_name}/{database_id}?v={view_id}"),".")))),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/connectors/notion/retrieve-db.png",alt:"Retrieving a database",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Retrieving a database"))),(0,a.kt)("p",null,"Additionally, you must provide permission for your integration to access the database. Ensure you share the database with your integration."),(0,a.kt)("p",null,"Finally, run a simple test, and this will fetch the data for the provided database ID from Notion."),(0,a.kt)("p",null,"Here's the revised table without the example values:"),(0,a.kt)("h3",{id:"create-a-query"},"Create a Query"),(0,a.kt)("p",null,"To create a query for a database, there are some basic components to consider, such as filtering, sorting, and the start cursor. To perform a query using the connector, select the endpoint and, after choosing the environment and account, fill in the necessary variable details."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Variable"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Filter"),(0,a.kt)("td",{parentName:"tr",align:null},"When supplied, this limits the pages returned based on the specified filter conditions (see ",(0,a.kt)("a",{parentName:"td",href:"https://developers.notion.com/reference/post-database-query-filter"},"Notion API documentation")," for details).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Sorts"),(0,a.kt)("td",{parentName:"tr",align:null},"When supplied, this orders the results based on the provided sorting criteria (see ",(0,a.kt)("a",{parentName:"td",href:"https://developers.notion.com/reference/post-database-query-sort"},"Notion API documentation")," for details).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Start Cursor"),(0,a.kt)("td",{parentName:"tr",align:null},"When supplied, this returns a page of results starting after the provided cursor. If not supplied, this endpoint will return the first page of results.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Page Size"),(0,a.kt)("td",{parentName:"tr",align:null},"This indicates the number of items from the full list that you want in the response, with a maximum limit of 100.")))),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/connectors/notion/create-query.png",alt:"Querying Notion database",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Querying Notion database"))),(0,a.kt)("p",null,"See below how the data changes based on the query we receive. The info with ",(0,a.kt)("inlineCode",{parentName:"p"},"KYC")," checkboxes marked are fetched in an ascending order."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "results": [\n    {\n      "id": "1349ed43-39cd-802f-8586-dbe2ffcfc9f2",\n      "created_time": "2024-11-04T07:38:00.000Z",\n      "last_edited_time": "2024-11-04T07:39:00.000Z",\n      "created_by": {\n        "id": "750b2eba-5bbc-4d7b-a882-5fe415ce0bc3"\n      },\n      "last_edited_by": {\n        "id": "750b2eba-5bbc-4d7b-a882-5fe415ce0bc3"\n      },\n      "parent": {\n        "database_id": "12e9ed43-39cd-808d-bce9-c7b984b762dd"\n      },\n      "properties": {\n        "KYC": {\n          "checkbox": true\n        },\n        "Registration Date": {\n          "date": {\n            "start": "2024-10-29"\n          }\n        },\n        "ID": {\n          "unique_id": {\n            "number": 3\n          }\n        },\n        "Email": {\n          "email": "superstar@redif.com"\n        },\n        "Name": {\n          "title": [\n            {\n              "text": {\n                "content": "Puneet"\n              }\n            }\n          ]\n        }\n      },\n      "url": "https://www.notion.so/Puneet-1349ed4339cd802f8586dbe2ffcfc9f2"\n    },\n    {\n      "id": "12f9ed43-39cd-8069-bf25-fd74e8f59c74",\n      "created_time": "2024-10-30T04:57:00.000Z",\n      "last_edited_time": "2024-11-04T07:39:00.000Z",\n      "created_by": {\n        "id": "750b2eba-5bbc-4d7b-a882-5fe415ce0bc3"\n      },\n      "last_edited_by": {\n        "id": "750b2eba-5bbc-4d7b-a882-5fe415ce0bc3"\n      },\n      "parent": {\n        "database_id": "12e9ed43-39cd-808d-bce9-c7b984b762dd"\n      },\n      "properties": {\n        "KYC": {\n          "checkbox": true\n        },\n        "Registration Date": {\n          "date": {\n            "start": "2024-10-02"\n          }\n        },\n        "ID": {\n          "unique_id": {\n            "number": 1\n          }\n        },\n        "Email": {\n          "email": "shibam@dronamobile.com"\n        },\n        "Name": {\n          "title": [\n            {\n              "text": {\n                "content": "Shibam"\n              }\n            }\n          ]\n        }\n      },\n      "url": "https://www.notion.so/Shibam-12f9ed4339cd8069bf25fd74e8f59c74"\n    }\n  ]\n}\n\n')),(0,a.kt)("h3",{id:"data-transformation-on-notion-response"},"Data Transformation on Notion response"),(0,a.kt)("p",null,"The response we received from the API is technically correct but not formatted in a way that is easy to use within a user interface. To enhance usability, we can ",(0,a.kt)("inlineCode",{parentName:"p"},"transform")," the data. This can be accomplished using the Transform Response feature in a data query or by applying JavaScript code to refine the existing data."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/connectors/notion/trasnform.png",alt:"Data Transformation",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Data Transformation"))),(0,a.kt)("h4",{id:"javascript-code-example"},"JavaScript Code Example"),(0,a.kt)("p",null,"Below is a JavaScript code snippet that takes the initial response data and transforms it into a more accessible format:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},' const transformedResults = data.results.map(item => ({\n    id: item.id,\n    name: item.properties.Name.title[0].text.content,\n    email: item.properties.Email.email,\n    kycStatus: item.properties.KYC.checkbox,\n    registrationDate: item.properties["Registration Date"].date.start,\n    url: item.url\n  }));\n\ndata = transformedResults\n')),(0,a.kt)("h4",{id:"explanation-of-the-code"},"Explanation of the Code:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Mapping: The map function is used to iterate over each item in the results array from the original data."),(0,a.kt)("li",{parentName:"ul"},"Object Construction: For each item, a new object is created that contains the relevant fields (ID, name, email, KYC status, registration date, and URL)."),(0,a.kt)("li",{parentName:"ul"},"Return Value: Finally, the transformed array of objects is returned, making it easier to integrate and use in other parts of your application.")))}k.isMDXComponent=!0}}]);