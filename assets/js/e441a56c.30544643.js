"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[65269],{9279:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>c,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>h});n(67294);var a=n(3905),r=n(86291);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const s={sidebar_position:1,title:"Chat"},c=void 0,p={unversionedId:"reference/controls/chat",id:"reference/controls/chat",title:"Chat",description:"The Chat control is a powerful tool for engaging in real-time conversations with a virtual assistant or other users. This dynamic component offers an intuitive chat interface designed for interactive communication and enables seamless integration with OpenAI, unlocking a world of possibilities for your chat applications.",source:"@site/docs/reference/controls/chat.md",sourceDirName:"reference/controls",slug:"/reference/controls/chat",permalink:"/reference/controls/chat",draft:!1,tags:[],version:"current",lastUpdatedAt:1719903502,formattedLastUpdatedAt:"Jul 2, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Chat"},sidebar:"docSidebar",previous:{title:"Charts & Graphs",permalink:"/reference/controls/charts"},next:{title:"CheckBox Tree",permalink:"/reference/controls/checkbox-tree"}},u={},h=[{value:"Binding Data Options",id:"binding-data-options",level:2},{value:"Static Messages",id:"static-messages",level:3},{value:"Properties",id:"properties",level:2},{value:"Control Outputs",id:"control-outputs",level:2},{value:"Events",id:"events",level:2},{value:"Using Chat Control",id:"using-chat-control",level:2},{value:"Inbuilt Integration",id:"inbuilt-integration",level:3},{value:"Configuring OpenAi Account on DronaHQ",id:"configuring-openai-account-on-dronahq",level:4},{value:"Using Third-Party Integration",id:"using-third-party-integration",level:3},{value:"Providing Connector Input from Chat Control",id:"providing-connector-input-from-chat-control",level:4},{value:"Maintaining chat history",id:"maintaining-chat-history",level:4}],d={toc:h},m="wrapper";function g(t){var{components:e}=t,n=l(t,["components"]);return(0,a.kt)(m,i(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){o(t,e,n[e])}))}return t}({},d,n),{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The Chat control is a powerful tool for engaging in real-time conversations with a virtual assistant or other users. This dynamic component offers an intuitive chat interface designed for interactive communication and enables seamless integration with OpenAI, unlocking a world of possibilities for your chat applications."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/controls/chat/chat.png",alt:"Chat Control",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Chat Control"))),(0,a.kt)("h2",{id:"binding-data-options"},"Binding Data Options"),(0,a.kt)("p",null,"The Chat control allows you to configure the interactions and messages for your chatbot or virtual assistant. You can customize the chat messages and responses through binding data options. This feature is particularly useful for providing chat history to users so they can continue from where they left off."),(0,a.kt)("h3",{id:"static-messages"},"Static Messages"),(0,a.kt)("p",null,"Static messages are predefined text or content that the chatbot can display during the conversation. Users can use the following example for static data binding:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n        "role": "system",\n        "content": "You are a friendly assistant, answer any question that the user asks in brief words."\n    },\n    {\n        "role": "assistant",\n        "content": "Hello, how may I help you?"\n    },\n    {\n        "role": "user",\n        "content": "what is the capital of India?"\n    },\n    {\n        "role": "assistant",\n        "content": "The capital of India is New Delhi."\n    }\n]\n')),(0,a.kt)("p",null,"This example demonstrates a conversation between the user and the assistant."),(0,a.kt)("h2",{id:"properties"},"Properties"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Property"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Use Inbuilt Integration"),(0,a.kt)("td",{parentName:"tr",align:null},"Toggle this ",(0,a.kt)("inlineCode",{parentName:"td"},"ON")," to enable configure the integration settings for inbuilt chat models.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Account"),(0,a.kt)("td",{parentName:"tr",align:null},"Specify the account for the chat model.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Model"),(0,a.kt)("td",{parentName:"tr",align:null},"Choose the chat model for the conversation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Max Tokens"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the maximum number of tokens for chat responses.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Temperature"),(0,a.kt)("td",{parentName:"tr",align:null},"Control the randomness of chat responses (higher values make responses more random).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Welcome Message"),(0,a.kt)("td",{parentName:"tr",align:null},"Display a welcome message for the chat users.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"System Instructions"),(0,a.kt)("td",{parentName:"tr",align:null},"Provide system instructions for the chatbot, specifying its behavior and responses.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Custom Button"),(0,a.kt)("td",{parentName:"tr",align:null},"Add a custom button to the chat interface.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Button Image"),(0,a.kt)("td",{parentName:"tr",align:null},"Specify the image for the custom button.")))),(0,a.kt)("h2",{id:"control-outputs"},"Control Outputs"),(0,a.kt)("p",null,"The Chat control offers an output placeholder ",(0,a.kt)("inlineCode",{parentName:"p"},"{{chat}}"),", which captures the user's chat messages and can be referenced in other controls, data queries, or JavaScript functions."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Output"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"chat"),(0,a.kt)("td",{parentName:"tr",align:null},"Represents the user's messages and interactions in the chat control.")))),(0,a.kt)("h2",{id:"events"},"Events"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Event Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"on_user_input"),(0,a.kt)("td",{parentName:"tr",align:null},"Occurs when a user sends a message or input in the chat.")))),(0,a.kt)("h2",{id:"using-chat-control"},"Using Chat Control"),(0,a.kt)("h3",{id:"inbuilt-integration"},"Inbuilt Integration"),(0,a.kt)("p",null,"In the Chat control properties, users can toggle on ",(0,a.kt)("inlineCode",{parentName:"p"},"Use Inbuilt Integration")," and select from the ",(0,a.kt)("inlineCode",{parentName:"p"},"Account")," dropdown. "),(0,a.kt)("p",null,"This dropdown contains all the configured ",(0,a.kt)("inlineCode",{parentName:"p"},"OpenAI Account")," integrated in DronaHQ."),(0,a.kt)("h4",{id:"configuring-openai-account-on-dronahq"},"Configuring OpenAi Account on DronaHQ"),(0,a.kt)("p",null,"Go to ",(0,a.kt)("inlineCode",{parentName:"p"},"Account Settings > Integrations > OpenAI account"),". One can ",(0,a.kt)("inlineCode",{parentName:"p"},"ADD"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"EDIT")," and view ",(0,a.kt)("inlineCode",{parentName:"p"},"ALL ACCOUNTS")," from here."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/controls/chat/configure-openAI.jpeg",alt:"Chat Control",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"OpenAI Account Integration"))),(0,a.kt)("h3",{id:"using-third-party-integration"},"Using Third-Party Integration"),(0,a.kt)("p",null,"Now, let's explore integrating a third-party solution into our chat control. It's a simple process requiring the creation of a REST API connector for our third-party AI integration."),(0,a.kt)("p",null,"Once the connector is set up, we'll connect it in the Action flow through server-side actions triggered by the ",(0,a.kt)("inlineCode",{parentName:"p"},"on_user_input")," event."),(0,a.kt)("h4",{id:"providing-connector-input-from-chat-control"},"Providing Connector Input from Chat Control"),(0,a.kt)("p",null,"The chat control supplies data through the ",(0,a.kt)("inlineCode",{parentName:"p"},"{{chat}}")," keyword in a ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON Array")," format containing ",(0,a.kt)("inlineCode",{parentName:"p"},"role")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"content"),"."),(0,a.kt)("p",null,"For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n    { \n        "role": "user", \n        "content": "Where is India?" \n    }\n]\n')),(0,a.kt)("p",null,"Ensure that we carefully pass the ",(0,a.kt)("inlineCode",{parentName:"p"},"content")," carefully in the connector, for that we can use ",(0,a.kt)("inlineCode",{parentName:"p"},"JS Code")," block action to do a transformation."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"  function JSCode( output, chat_input){\n    lastArray = chat_input[chat_input.length - 1]\n    output  = lastArray.content\n    return output\n  }\n")),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/controls/chat/transformation.jpeg",alt:"JS Code Blocl",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"JS Code Block"))),(0,a.kt)("h4",{id:"maintaining-chat-history"},"Maintaining chat history"),(0,a.kt)("p",null,"There's a possibility that the connector might not return the chat history, which could disrupt the chat display. To counter this, we can maintain chat history using a ",(0,a.kt)("inlineCode",{parentName:"p"},"JS Code")," block action to append a new JSON Array into the previous one. Here's an example code snippet:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'let curr_response = { \n    "role": "assistant",\n    "content": reply\n}\ncurr_history.push(curr_response)\noutput = curr_history\n')),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/reference/controls/chat/history.jpeg",alt:"JS Code Blocl",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"JS Code Block"))),(0,a.kt)("p",null,"Now, the third-party integration is set up for use in the chat control. Simply display the new history with the updated response from the connector."))}g.isMDXComponent=!0}}]);