"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[44470],{95678:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(67294);const r={"main-img":"main-img_qxSY"};function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const l=e=>{var{src:t}=e,l=s(e,["src"]);const[c,d]=(0,o.useState)(!1),p=n(2181)(`./static${t}`).default;return o.createElement("div",{className:r.thumbnail},o.createElement("img",a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){i(e,t,n[t])}))}return e}({src:p},l),{className:`${r["main-img"]} ${l.className||""}`})))}},15743:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>g,frontMatter:()=>l,metadata:()=>d,toc:()=>u});n(67294);var o=n(3905),r=n(95678);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const l={sidebar_position:4},c="Control Editor IDE Advance Concepts",d={unversionedId:"control-editor-ide/advance-concepts",id:"control-editor-ide/advance-concepts",title:"Control Editor IDE Advance Concepts",description:"CoffeeScript File",source:"@site/docs/control-editor-ide/advance-concepts.md",sourceDirName:"control-editor-ide",slug:"/control-editor-ide/advance-concepts",permalink:"/control-editor-ide/advance-concepts",draft:!1,tags:[],version:"current",lastUpdatedAt:1692268647,formattedLastUpdatedAt:"Aug 17, 2023",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docSidebar",previous:{title:"Creating Example controls using Control Editor",permalink:"/control-editor-ide/sample-controls-code"},next:{title:"Custom Fx Functions and Action IDE",permalink:"/custom-fx-ide"}},p={},u=[{value:"CoffeeScript File",id:"coffeescript-file",level:2},{value:"Edit Section",id:"edit-section",level:3},{value:"Dynamic repeatable properties",id:"dynamic-repeatable-properties",level:4},{value:"To Trigger model change",id:"to-trigger-model-change",level:3},{value:"SudoComponents section",id:"sudocomponents-section",level:3},{value:"Javascript File",id:"javascript-file",level:2},{value:"Multiple outputs from a control",id:"multiple-outputs-from-a-control",level:2},{value:"CoffeeScript File",id:"coffeescript-file-1",level:3},{value:"Javascript File",id:"javascript-file-1",level:3}],m={toc:u},f="wrapper";function g(e){var{components:t}=e,n=s(e,["components"]);return(0,o.kt)(f,a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){i(e,t,n[t])}))}return e}({},m,n),{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"control-editor-ide-advance-concepts"},"Control Editor IDE Advance Concepts"),(0,o.kt)("h2",{id:"coffeescript-file"},"CoffeeScript File"),(0,o.kt)("h3",{id:"edit-section"},"Edit Section"),(0,o.kt)("h4",{id:"dynamic-repeatable-properties"},"Dynamic repeatable properties"),(0,o.kt)("p",null,"If we wish to add this kind of dynamic field like this we have to use this structure for it."),(0,o.kt)("figure",null,(0,o.kt)(r.Z,{src:"/img/advanced-concepts/custom-control-ide/advance-concepts/advance-concepts-repeat-section-in-properties.png",alt:"Simple Database GUI",mdxType:"Image"}),(0,o.kt)("figcaption",{align:"left"},(0,o.kt)("i",null,"dynamic repeat properties."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code in Edit Section")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-handlebars"},'<div data-rv-each-option="model.<%= Formbuilder.options.mappings.OPTIONS %>" data-rv-show="model.dynamic_color" class="edit_view_prop_nested three_col" style="margin:0;">\n    <div class="edit_view_prop_nested three_col" style="margin: 0">\n        <%= Formbuilder.templates[\'edit/color_picker\']({\n            "label" : {name:"pick color", position:"top", width:""},\n            "name" : "option:code",\n            "col_width" : "two_col",\n            "inside_repeat" : true,\n            "solid_color_only" : true\n        }) %>\n        <div class="prop_item">\n            <div class="prop_top">\n                <div class="label"></div>\n            </div>\n            <div class="prop_botm prop_botm_no_border">\n                <a class="js-remove-option <%= Formbuilder.options.BUTTON_CLASS %>" title="Remove Option" style="margin: auto;"><i class=\'trash alternate outline icon\'></i></a>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div data-rv-show = "model.dynamic_color" class="edit_view_ctrl_prop fb-buttom-add" style="margin: 0">\n    <a class="js-add-option three_col <%= Formbuilder.options.BUTTON_CLASS %>">Add option</a>\n</div>\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Code in defaultAttributes section")),(0,o.kt)("p",null,"And we have to add two variables in default attributes for this as :- "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'attrs.field_options.options = [\n    { code: "#26BC6A" },\n]\nattrs.default_field_options_structure =\n    code:"#26BC6A"\n')),(0,o.kt)("p",null,"So every time we click on the ",(0,o.kt)("inlineCode",{parentName:"p"},"Add option")," button this array will be filled with objects dynamically as the structure mentioned in the second variable."),(0,o.kt)("p",null,"To access code in the options array we normally use ",(0,o.kt)("inlineCode",{parentName:"p"},"dot(.) operator")," but here we have to use ",(0,o.kt)("inlineCode",{parentName:"p"},"colon(:) operator"),"."),(0,o.kt)("h3",{id:"to-trigger-model-change"},"To Trigger model change"),(0,o.kt)("p",null,"If we have a configuration like Dropdown Control where we have to change selection type from single select to multi select we have to add onModelChange method to reflect this change in model "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-coffeescript"},'onModelChange: () ->\n   if @.changed.hasOwnProperty(\'select_type\')\n       if @.get(\'select_type\') == \'singleselect\'\n           @.set({\n               "data_type":"string",\n               "field_database_editor_data_format": "single_select"\n           })\n       else\n           @.set({\n               "data_type":"list",\n               "field_database_editor_data_format": "multi_select"\n           })\n')),(0,o.kt)("h3",{id:"sudocomponents-section"},"SudoComponents section"),(0,o.kt)("p",null,"Advanced Functions mostly used with master controls in the ",(0,o.kt)("inlineCode",{parentName:"p"},"sudoComponentFunctions")," section. with ",(0,o.kt)("inlineCode",{parentName:"p"},"setValue")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"getValue")," functions"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"getJson: () ->")," this function is used to convert binded data into json format as shown in code below."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-coffeescript"},'getJson: () ->\n    liveData = this.backBoneModel.get("LiveData") || "[]"\n    liveData = if !_.isArray(liveData) && isJson(liveData) then JSON.parse(liveData) else liveData\n    return liveData\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"reset: () ->")," this function can be used to reset control data like this,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-coffeescript"},'reset: () ->\n    this.backBoneModel.set({"LiveData":"[]","dummySchema":"{}"})\n')),(0,o.kt)("h2",{id:"javascript-file"},"Javascript File"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"this.getJson")," :- this function is mainly used with master controls and this function has to be overridden by master controls.\nmain use of this function is when we want to bind this controls JSON output to any other control we have to use this method."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"this.getJson = function () {\n    var json = [];\n    if (this.model.field_options && this.model.field_options.options) {\n        json = this.model.field_options.options;\n    }\n    return json;\n}\n")),(0,o.kt)("h2",{id:"multiple-outputs-from-a-control"},"Multiple outputs from a control"),(0,o.kt)("h3",{id:"coffeescript-file-1"},"CoffeeScript File"),(0,o.kt)("p",null,"To get multiple outputs from a control in the form of properties like table grid control, we have to use the same function ",(0,o.kt)("inlineCode",{parentName:"p"},"getPropertiesKeyword")," in sudoComponentFunctions as,"),(0,o.kt)("figure",null,(0,o.kt)(r.Z,{src:"/img/advanced-concepts/custom-control-ide/advance-concepts/advance-concepts-getPropertiesKeyword-in-sudofunctions.png",alt:"Simple Database GUI",mdxType:"Image"}),(0,o.kt)("figcaption",{align:"center"},(0,o.kt)("i",null,"getPropertiesKeyword inside sudoComponentFunctions."))),(0,o.kt)("p",null,"structure for the ",(0,o.kt)("inlineCode",{parentName:"p"},"getPropertiesKeyword")," function when used inside sudoComponentFunctions."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"getPropertiesKeyword: (ctrModel) ->")," this function is used to set extra property values added to the control like in table grid we have ",(0,o.kt)("inlineCode",{parentName:"p"},"tablegrid.PROPERTIES.LIMIT")," this function is used to get values of these extra keywords."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-coffeescript"},'getPropertiesKeyword: (ctrModel) ->\n    id = ctrModel.get("field_key_name")\n    name = ctrModel.get("field_display_key_name")\n    extraKeyword = {}\n    extraKeyword[[id,"PROPERTIES", "SEARCHTEXT"].join(".")] = () ->  ""\n    extraKeyword[[id,"PROPERTIES", "OFFSET"].join(".")] = () -> ctrModel.get("offset")\n    extraKeyword[[id,"PROPERTIES", "LIMIT"].join(".")] = () ->  ctrModel.get("pageLimit")\n    extraKeyword[[id,"PROPERTIES", "STARTROW"].join(".")] = () -> Number(ctrModel.get("offset")) + 1\n    extraKeyword[[id,"PROPERTIES", "ENDROW"].join(".")] = () ->  Number(ctrModel.get("offset")) + Number(ctrModel.get("pageLimit"))\n\n    return extraKeyword\n')),(0,o.kt)("p",null,"To make it available for binding inside DronaHQ we have to configure ",(0,o.kt)("inlineCode",{parentName:"p"},"getPropertiesKeyword")," as part of main coffeescript file as image below"),(0,o.kt)("figure",null,(0,o.kt)(r.Z,{src:"/img/advanced-concepts/custom-control-ide/advance-concepts/advance-concepts-getPropertiesKeyword-outside-sudofunctions.png",alt:"Simple Database GUI",mdxType:"Image"}),(0,o.kt)("figcaption",{align:"center"},(0,o.kt)("i",null,"getPropertiesKeyword outside sudoComponentFunctions."))),(0,o.kt)("p",null,"structure for the ",(0,o.kt)("inlineCode",{parentName:"p"},"getPropertiesKeyword")," function when used outside sudoComponentFunctions."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-coffeescript"},'getPropertiesKeyword: (mjson) ->\n    id = mjson.field_key_name\n    name = mjson.field_display_key_name\n    extraKeyword = {}\n    extraKeyword[[id,"PROPERTIES", "SEARCHTEXT"].join(".")] = {\n        name: [name,"PROPERTIES", "SEARCHTEXT"].join("."),\n        data_type: "PROPERTIES"\n    }\n    extraKeyword[[id,"PROPERTIES", "OFFSET"].join(".")] = {\n        name:[name,"PROPERTIES", "OFFSET"].join("."),\n        data_type: "number"\n    }\n    extraKeyword[[id,"PROPERTIES", "LIMIT"].join(".")] = {\n        name:[name,"PROPERTIES", "LIMIT"].join(".")\n        data_type: "number"\n    }\n    extraKeyword[[id,"PROPERTIES", "STARTROW"].join(".")] = {\n        name:[name,"PROPERTIES", "STARTROW"].join(".")\n        data_type: "number"\n    }\n    extraKeyword[[id,"PROPERTIES", "ENDROW"].join(".")] = {\n        name:[name,"PROPERTIES", "ENDROW"].join(".")\n        data_type: "number"\n    }\n')),(0,o.kt)("h3",{id:"javascript-file-1"},"Javascript File"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"this.getPropertiesKeywordDataMap")," :- this function is used to get values of extra properties, the same example as table grid."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'this.getPropertiesKeywordDataMap = function () {\n    var id = this.model.field_key_name;\n    var name = this.model.field_display_key_name;\n    var map = {};\n    map[[id, "PROPERTIES", "SEARCHTEXT"].join(".")] = this._getSearchText.bind(this);\n    map[[id, "PROPERTIES", "OFFSET"].join(".")] = this._getOffset.bind(this);\n    map[[id, "PROPERTIES", "LIMIT"].join(".")] = this._getLimit.bind(this);\n    map[[id, "PROPERTIES", "STARTROW"].join(".")] = this._getStartRow.bind(this);\n    map[[id, "PROPERTIES", "ENDROW"].join(".")] = this._getEndRow.bind(this);\n\n    return map;\n}\n')),(0,o.kt)("p",null,"And we have to write definitions for these get functions which can be called here as."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"this._getSearchText = function () {\n    return this.$el.find('.wildCardSearch').val();\n};\nthis._getOffset = function () {\n    offset = this.model.offset;\n    return offset;\n};\nthis._getLimit = function () {\n    limit = this.$el.find('.totalRows').val()\n    return parseInt(limit)\n};\nthis._getStartRow = function() {\n    return this.model.startRow;\n};\nthis._getEndRow = function() {\n    return this.model.endRow;\n};\n")),(0,o.kt)("p",null,"And to trigger change in this values as per our need we have to use ",(0,o.kt)("inlineCode",{parentName:"p"},"triggerPropertyChange")," method."),(0,o.kt)("p",null,"Eg :- here ",(0,o.kt)("inlineCode",{parentName:"p"},"self = this;")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'self.triggerPropertyChange("OFFSET");\nself.triggerPropertyChange("STARTROW");\nself.triggerPropertyChange("ENDROW");\n')),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"This Multiple outputs from a control is supported for all types of controls expect for controls with ",(0,o.kt)("inlineCode",{parentName:"p"},'attrs.field_composition_type = "composite"'),". Preferably use this for ",(0,o.kt)("inlineCode",{parentName:"p"},"composite_list")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"master")," controls. ")))}g.isMDXComponent=!0}}]);