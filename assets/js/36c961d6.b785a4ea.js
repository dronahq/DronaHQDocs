"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[44252],{95678:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294);const o={"main-img":"main-img_qxSY"};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const s=e=>{var{src:t}=e,s=r(e,["src"]);const[d,p]=(0,a.useState)(!1),c=n(2181)(`./static${t}`).default;return a.createElement("div",{className:o.thumbnail},a.createElement("img",i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){l(e,t,n[t])}))}return e}({src:c},s),{className:`${o["main-img"]} ${s.className||""}`})))}},47547:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>f,frontMatter:()=>d,metadata:()=>c,toc:()=>m});n(67294);var a=n(3905),o=n(86291),l=n(95678);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const d={sidebar_position:1},p="Custom Control IDE (Deprecated)",c={unversionedId:"control-editor-ide/basics",id:"control-editor-ide/basics",title:"Custom Control IDE (Deprecated)",description:"In DronaHQ, we have the following two methods for building custom controls:",source:"@site/docs/control-editor-ide/basics.md",sourceDirName:"control-editor-ide",slug:"/control-editor-ide/basics",permalink:"/control-editor-ide/basics",draft:!1,tags:[],version:"current",lastUpdatedAt:1713436128,formattedLastUpdatedAt:"Apr 18, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docSidebar",previous:{title:"Custom Control IDE",permalink:"/category/custom-control-ide"},next:{title:"Adding new properties in Coffee file's edit section",permalink:"/control-editor-ide/adding-new-properties"}},u={},m=[{value:"Basics",id:"basics",level:2},{value:"Builder Screen",id:"builder-screen",level:3},{value:"Preview Screen",id:"preview-screen",level:3},{value:"How to open the control editor ?",id:"how-to-open-the-control-editor-",level:2},{value:"Control editor",id:"control-editor",level:2},{value:"Control editor top panel",id:"control-editor-top-panel",level:3},{value:"Building Reusable Controls",id:"building-reusable-controls",level:3},{value:"Control Types",id:"control-types",level:2},{value:"Architecture of Control editor",id:"architecture-of-control-editor",level:2},{value:"Control Editor Coffee Section",id:"control-editor-coffee-section",level:3},{value:"Control Editor CSS Section",id:"control-editor-css-section",level:3},{value:"Control Editor Javascript Section",id:"control-editor-javascript-section",level:3},{value:"Control Editor Handlebars Section",id:"control-editor-handlebars-section",level:3},{value:"Control Life Cycle",id:"control-life-cycle",level:2},{value:"Builder View",id:"builder-view",level:3},{value:"Preview / package",id:"preview--package",level:3},{value:"Do\u2019s and Don\u2019ts",id:"dos-and-donts",level:2},{value:"Debugging Control while building",id:"debugging-control-while-building",level:2}],h={toc:m},k="wrapper";function f(e){var{components:t}=e,n=s(e,["components"]);return(0,a.kt)(k,r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}({},h,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"custom-control-ide-deprecated"},"Custom Control IDE (Deprecated)"),(0,a.kt)("p",null,"In DronaHQ, we have the following two methods for building custom controls: "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Using Custom Control IDE (Deprecated)"),(0,a.kt)("li",{parentName:"ol"},"Using ",(0,a.kt)("a",{parentName:"li",href:"https://docs.dronahq.com/reference/controls/custom-control/"},"Custom Control")," in an Iframe. (Recommended)",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"Your custom control\u2019s code runs in a separate iframe which provide complete flexibility to use React or vanilla javascript as per your needs.")))),(0,a.kt)("h2",{id:"basics"},"Basics"),(0,a.kt)("p",null,"To Start with any new control in Dronahq you should first focus on 2 sections: Builder section and preview section."),(0,a.kt)("p",null,"To create a new control we use control editor , so every time we create a new control we get a ready made basic structure for our control"),(0,a.kt)("h3",{id:"builder-screen"},"Builder Screen"),(0,a.kt)("p",null,"we can drop our control to the builder screen to use it in our app."),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/builder-screen.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Builder screen and Controls components."))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Controls")," :-\nour control will be visible here in the custom section."),(0,a.kt)("p",null,"A control basically comprises 3 things :-"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Properties")," :-\nHere we can see the properties that can be used to configure our control.\neg :- we can set the background colour of our control from here."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Data Binding")," :-\nHere we can bind data to our control from different sources."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Events")," :-\nHere we can see the Actions that we can bind to our control.")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"INFO part of properties is provided by default we cannot edit it.")),(0,a.kt)("h3",{id:"preview-screen"},"Preview Screen"),(0,a.kt)("p",null,"we can also check how our control and app will look when deployed."),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/preview-screen.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Preview Screen."))),(0,a.kt)("p",null,"So first of all we have to decide the look and feel for your control on these screens.\nControl UI has to be configured for both screens separately ."),(0,a.kt)("p",null,"To develop any new control we have to use ",(0,a.kt)("inlineCode",{parentName:"p"},"Control Editor"),"."),(0,a.kt)("h2",{id:"how-to-open-the-control-editor-"},"How to open the control editor ?"),(0,a.kt)("p",null,"On Console window Go-to ",(0,a.kt)("inlineCode",{parentName:"p"},"Profile -> Extensions -> Control Editor")),(0,a.kt)("h2",{id:"control-editor"},"Control editor"),(0,a.kt)("p",null,"This is how the control editor looks."),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Control Editor."))),(0,a.kt)("h3",{id:"control-editor-top-panel"},"Control editor top panel"),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-top-bar.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Control Editor top panel."))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Button"),(0,a.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Unique_name"),(0,a.kt)("td",{parentName:"tr",align:null},"Controls unique_name will be displayed here.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Current_version"),(0,a.kt)("td",{parentName:"tr",align:null},"current published version of control will be displayed here.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Edit"),(0,a.kt)("td",{parentName:"tr",align:null},"Edit button is used to edit properties defined at the time of creating new control.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"New"),(0,a.kt)("td",{parentName:"tr",align:null},"New button is used to create new controls.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Save"),(0,a.kt)("td",{parentName:"tr",align:null},"save button is used to save our code. We can also use CTRL + S to save code.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Publish"),(0,a.kt)("td",{parentName:"tr",align:null},"Every time we make changes to our code we have to publish the control so every app using our control will have the updated code.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)(l.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-top-bar-side-arrow.png",width:"40px",mdxType:"Image"})),(0,a.kt)("td",{parentName:"tr",align:null},"By clicking on this icon we can see a list of controls and navigate to code of different controls")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Basically Control Editor is divided into 4 parts")," :-"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"COFFEE"),(0,a.kt)("li",{parentName:"ul"},"CSS"),(0,a.kt)("li",{parentName:"ul"},"JAVASCRIPT"),(0,a.kt)("li",{parentName:"ul"},"HANDLEBARS")),(0,a.kt)("p",null,"For ",(0,a.kt)("inlineCode",{parentName:"p"},"Builder screen")," code has to be written in ",(0,a.kt)("inlineCode",{parentName:"p"},"COFFEE")," section"),(0,a.kt)("p",null,"For ",(0,a.kt)("inlineCode",{parentName:"p"},"Preview screen "),"code has to written in following sections :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Handlebars"),(0,a.kt)("li",{parentName:"ul"},"CSS"),(0,a.kt)("li",{parentName:"ul"},"JAVASCRIPT")),(0,a.kt)("h3",{id:"building-reusable-controls"},"Building Reusable Controls"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"New")," :-\nTo Start with a new control click on the ",(0,a.kt)("inlineCode",{parentName:"p"},"+ NEW")," button in the control editor."),(0,a.kt)("p",null,"After that new control dialog will be visible like this"),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-add-control-click.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"left"},(0,a.kt)("i",null,"Add new control config screen."))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Field"),(0,a.kt)("th",{parentName:"tr",align:null},"is_mandatory"),(0,a.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Unique name"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"It will be the unique name for our control. It cannot contain spaces also once added we cannot change this name.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Display Name"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"This name will be visible on the controls section of the builder screen. It can contain spaces.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Search tags"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"This input can be used while searching for control in the Control section of the builder screen.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Group"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"it is used to specify in which group of controls sections this control will be grouped. we cannot change the group while creating a new control.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Choose icon"),(0,a.kt)("td",{parentName:"tr",align:null},"yes"),(0,a.kt)("td",{parentName:"tr",align:null},"the icon we choose from here is visible on the controls section of the builder screen with the display name. Click on ",(0,a.kt)("inlineCode",{parentName:"td"},"ADD")," and a new control will be added in the custom section of controls on the builder screen.")))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"To see any changes made in the control editor on app screens we have to refresh the app.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Edit")," :- if you wish to edit any control properties use the Edit button."),(0,a.kt)("p",null,"After that Edit control dialog will be visible like this"),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-edit-control-click.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"left"},(0,a.kt)("i",null,"Edit control config screen."))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Field"),(0,a.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Marketplace"),(0,a.kt)("td",{parentName:"tr",align:null},"if this toggle is turned on our control will be visible in the marketplace of controls list. ",(0,a.kt)("inlineCode",{parentName:"td"},"+ Marketplace")," we can click on this and add control to the controls section.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Group"),(0,a.kt)("td",{parentName:"tr",align:null},"now we can change the group of control from here.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Status"),(0,a.kt)("td",{parentName:"tr",align:null},"if this toggle is turned on the status of control will be changed to active.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Dependencies"),(0,a.kt)("td",{parentName:"tr",align:null},"if we wish to add any library or dependency it can be done from here. On click of ",(0,a.kt)("inlineCode",{parentName:"td"},"ADD DEPENDENCY")," button a popup will be displayed - So we can select checkboxes for dependencies we wish to add.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Deprecated"),(0,a.kt)("td",{parentName:"tr",align:null},"if this toggle is turned on the control will not be visible in the control section and if you have already used this control in an app then it will show status as deprecated in properties.")))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"If you wish to use any other dependency or library not available in list , please feel free to connect with Dronahq and we will do the needful. or we can use import library from ",(0,a.kt)("inlineCode",{parentName:"p"},"Config -> Custom Script -> Library Import"))),(0,a.kt)("h2",{id:"control-types"},"Control Types"),(0,a.kt)("p",null,"Control can be of 2 types"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"input")," :- this controls take input and give an output. eg :- Text Input"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"non_input")," :- this are also known as display controls. eg :- Table Grid")),(0,a.kt)("h2",{id:"architecture-of-control-editor"},"Architecture of Control editor"),(0,a.kt)("h3",{id:"control-editor-coffee-section"},"Control Editor Coffee Section"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Coffee section code")," is applicable for ",(0,a.kt)("inlineCode",{parentName:"p"},"Builder Screen")," only."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"to write any code in coffee we have to follow CoffeeScript syntax. Refer to ",(0,a.kt)("a",{parentName:"p",href:"https://coffeescript.org/"},"coffeescript docs"))),(0,a.kt)("p",null,"Coffee is strict with indentation like python."),(0,a.kt)("p",null,"So in Coffee section we get a ready made Structure for your control and we have to write code in that structure only and also every section have some code predefined in it :-"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Formbuilder.registerField")," :- will show the display_name of control."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"group")," :- for back-end use never edited"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"order")," :- for back-end use never edited"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"type")," :- here we can define type of our control i.e input or non_input"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Basically coffee section is divided into many sub-sections")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"view"),(0,a.kt)("li",{parentName:"ol"},"edit"),(0,a.kt)("li",{parentName:"ol"},"addButton"),(0,a.kt)("li",{parentName:"ol"},"viewJs"),(0,a.kt)("li",{parentName:"ol"},"onResolutionChange"),(0,a.kt)("li",{parentName:"ol"},"sudoComponentFunctions"),(0,a.kt)("li",{parentName:"ol"},"gridConfiguration"),(0,a.kt)("li",{parentName:"ol"},"defaultAttributes")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Explanation for each section")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"view")," :- This section is also further divided into 3 sub sections,")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"HTML")," :- as we can see some\ntags this is the part where we have to write our controls HTML logic.\nTo guide us there are comments given like"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"\x3c!-- Your code goes here \u2013>\n\n\u2026.\n\n\u2026.\n\n\x3c!-- Your code ends here--\x3e\n")),(0,a.kt)("p",null,"So we should always write our HTML logic inside this."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"As discussed in do's and don'ts if the preview part is completely ready we can directly copy code inside the wrapper class from the handlebars file and use it here.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Style")," :- here we have to write css for our control , to write css we have follow certain rules , like before writing css for any selector we have to follow this syntax as ",(0,a.kt)("inlineCode",{parentName:"p"},".<%= rf.get('cid') %> .selectorName")," . example given for wrapper class."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"cid stands for Control id it is a dynamically generated unique id for every control.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"here also we can directly copy paste code from css file we just have to change the syntax here accordingly.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Script")," :- here we can write our javascript logic here. But for most of the cases we do use it instead we use the viewJS section."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"if we find it difficult to convert our javascript file logic to coffee script.")),(0,a.kt)("p",null,"We can use IIFE (Immediately Invoked Function Expression) function."),(0,a.kt)("p",null,"Eg :- ",(0,a.kt)("inlineCode",{parentName:"p"},"(function(){ })()")),(0,a.kt)("p",null,"here we can directly copy paste our javascript file logic with minimal changes."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Changes needed are")),(0,a.kt)("p",null,"Add the following as the first line for ",(0,a.kt)("inlineCode",{parentName:"p"},"this.$el")," scope :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"this.$el = $('body').find(\".response-field-<%= rf.get('field_type') %>.<%= rf.get('cid') %>\");\n")),(0,a.kt)("p",null,"And to access any variable accessed using model in javascript file use :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'builderComponents["<%= rf.get(\'field_key_name\')%>"].backBoneModel.get("variable_name");\n')),(0,a.kt)("p",null,"At the end we have to call the function to execute it like we do in ",(0,a.kt)("inlineCode",{parentName:"p"},"ViewJS"),"."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"we never bring our click or different events to the coffee section because it will make the builder slow and performance will be affected.")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"edit")," :-\nThis section is used to define properties for our control. This section also provides us with some predefined code.")),(0,a.kt)("p",null,"Here also we have comments to guide us exactly where we have to write our code."),(0,a.kt)("p",null,"To add any new property we have to add this block of code accordingly -"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'<%= Formbuilder.templates[\'edit/text_input\']({\n   "label": {name:"textfield", position:"left", width:"one_col"},\n   "name": "placeholder",\n   "isDisabled": false\n}) %>\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Output")," :-"),(0,a.kt)("figure",null,(0,a.kt)(l.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-properties-example.png",alt:"Simple Database GUI",mdxType:"Image"}),(0,a.kt)("figcaption",{align:"left"},(0,a.kt)("i",null,"Text input property."))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Explanation")," :-"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Formbuilder.templates","['edit/text_input']")," :- this defines that our property will be an input box."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},'"label"')," :- here we have label attribute divided in 3 parts :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"name")," :- text to be displayed on the label."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"position")," :- where we want to place this label mostly values are left or top"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"width")," :- we can specify the width of the label default is one_col, possible values are one_col, two_col, three_col only.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},'"name"')," :- this is the variable that must be present in defaultAttributes, so once we write variable name here we have to add that variable in defaultAttributes simultaneously."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},'"col_width"')," :- this is the width that will be provided to the text input field here also possible values are ",(0,a.kt)("inlineCode",{parentName:"p"},"one_col, two_col, three_col")," only."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"we have to add , (comma) before writing the next attribute. We can create different accordion for different sections by following the given structure.")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://coffeescript.org/"},"Adding new properties in Coffee file's edit section - Overview")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"addButton"),"\nThis method is used to add the icon and label for control shown in the control list. These values come automatically and are never changed.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'addButton: """\n  <span class="symbol">\n      <span class="symbol-icon-box">\n          <img src="app/src/images/controls/text.svg" />\n      </span>\n      <span class="clabel">Text Input</span>\n  </span>\n"""\n')),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"viewJS"),"\nThis section is mainly used for declaring the body of your sudo functions.\nHere we can write logic that we want for our control mostly setValue of javascript file.")),(0,a.kt)("p",null,"we have to write a body for our functions and also we have to make function calls as well to execute it."),(0,a.kt)("p",null,"Also , we can access variables of defaultAttributes as ",(0,a.kt)("inlineCode",{parentName:"p"},'model.get("cid")'),"."),(0,a.kt)("p",null,"No need for ",(0,a.kt)("inlineCode",{parentName:"p"},"this")," keyword here like the javascript file."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"we can write javascript file logic setValue and other functions here for our control here but we have to follow coffee syntax accordingly.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"some changes which will be needed, Javascript syntax\tCoffee replacement"),(0,a.kt)("table",{parentName:"admonition"},(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"JavaScript"),(0,a.kt)("th",{parentName:"tr",align:null},"Coffeescript"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"``"),(0,a.kt)("td",{parentName:"tr",align:null},'""" """')),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"${}"),(0,a.kt)("td",{parentName:"tr",align:null},"#{}")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"? :"),(0,a.kt)("td",{parentName:"tr",align:null},"If \u2026 then \u2026 else \u2026")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"this."),(0,a.kt)("td",{parentName:"tr",align:null},"@"))))),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"sudoComponentFunctions"),"\nThis section is used to define setValue and getValue for the builder and set the parameter values for these functions. This section is commented by default. We have to uncomment it if we wish to use it.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"if we wish to return only 1st value or 1st object from the data binded then we can ignore getValue() from here as it will be handled by the system. Same goes with setValue() but if we wish to use schema formatting then we have to write setValue accordingly.")),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"gridConfiguration"),"\nThis section is used to provide default grid size whenever a new control is dropped.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"gridConfiguration: \n  minWidth: 1,\n  maxWidth: 24,\n  minHeight: 5,\n  maxHeight: 0,\n  defaultHeight: 8,\n  defaultWidth: 12,\n  isWidthResizable: true,\n  isHeightResizable: true\n")),(0,a.kt)("p",null,"Setting values to 0 (zero) means no limit"),(0,a.kt)("p",null,"In dronahq ",(0,a.kt)("inlineCode",{parentName:"p"},"Width")," ranges from ",(0,a.kt)("inlineCode",{parentName:"p"},"0 - 24")),(0,a.kt)("p",null,"minWidth and minHeight are used to specify that control can not be shrinked beyond these values."),(0,a.kt)("p",null,"Last two variable are used to set is control size changeable by dragging the edges of control"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"size here is not in pixels it is in grid counts.")),(0,a.kt)("ol",{start:8},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"defaultAttributes"),"\nIn this section we have to write attributes or variables we want to use on both the builder as well as the preview screen.")),(0,a.kt)("p",null,"This section also has some predefined code as :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'defaultAttributes: (attrs) ->\n  attrs.label = \'MyControl\'\n  attrs.label_hidden = false\n  attrs.label_value = "Sample Label"\n  attrs.data_type = "string"\n  attrs.field_composition_type = "single"\n  attrs.field_available_in_database_editor = false\n  attrs.field_editable_in_database_editor = false\n  attrs.field_database_editor_data_format = "single_line_text"\n  attrs\n')),(0,a.kt)("p",null,"Declaring variable in this section :- we have to add attrs before every variable name and follow the indentation."),(0,a.kt)("p",null,"Eg :- ",(0,a.kt)("inlineCode",{parentName:"p"},"attrs.font_size = 14"),"."),(0,a.kt)("p",null,"We can declare our variables that we have used in properties and then access them in coffee, css, javascript and handlebars file by following their respective syntax."),(0,a.kt)("p",null,"There are also some system defined variables so we can use them for our control to work accordingly."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Attributes for a control")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"attribute"),(0,a.kt)("th",{parentName:"tr",align:null},"description"),(0,a.kt)("th",{parentName:"tr",align:null},"Example"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"label"),(0,a.kt)("td",{parentName:"tr",align:null},"To specify the value we want to show on the label of our control. any string value"),(0,a.kt)("td",{parentName:"tr",align:null},"attrs.label = 'MyControl'")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"label_hidden"),(0,a.kt)("td",{parentName:"tr",align:null},"To specify if we want the label hidden when new control is dropped. Values true/false"),(0,a.kt)("td",{parentName:"tr",align:null},"attrs.label_hidden = false")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"data_type"),(0,a.kt)("td",{parentName:"tr",align:null},"To specify what data we want for our control ,Mostly string."),(0,a.kt)("td",{parentName:"tr",align:null},'attrs.data_type = "string"')),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LiveData"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to store the data binded to our control and if we wish to show some data when control is dropped on the builder screen. We have to provide that data in this variable. Data can be a string or array or array of objects."),(0,a.kt)("td",{parentName:"tr",align:null},'attrs.LiveData = "Data"')),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"field_database_editor_data_format"),(0,a.kt)("td",{parentName:"tr",align:null},"This variable is used to set data format as single_select or multi_select ,Mostly it is single_select only."),(0,a.kt)("td",{parentName:"tr",align:null},'attrs.field_database_editor_data_format = "single_select"')),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Any user defined attribute"),(0,a.kt)("td",{parentName:"tr",align:null},"We can add sour user defined attributes that we need to store the values that are provided in properties section"),(0,a.kt)("td",{parentName:"tr",align:null},"attrs.fontSize = 14")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Very Important attributes for a control are")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,a.kt)("th",{parentName:"tr",align:null},"Explanation"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"field_composition_type"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to define what kind of data our control will accept . possible values for this variable are ",(0,a.kt)("inlineCode",{parentName:"td"},"single, composite, list, composite_list"),". Bind Data will change according to different values.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"field_datatypes"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to provide default values in case of dropdown in properties section.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"is_master_control"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable accepts only boolean values ",(0,a.kt)("inlineCode",{parentName:"td"},"(true or false)"),". If we wish to bind data from different controls like DataStore with multiple columns then we have to make our control as master control. ",(0,a.kt)("inlineCode",{parentName:"td"},"Recommended for Display/non_input Controls"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"allowSchemaFormatting"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable accepts only boolean values ",(0,a.kt)("inlineCode",{parentName:"td"},"(true or false)"),". If we wish to provide this option in bind data then we have to set this variable to true. To enable this we have to make our control as master control and we get schema from the second variable of ",(0,a.kt)("inlineCode",{parentName:"td"},"setValue(obj,schema,datasource)")," method. We have to handle all the cases of schema to make this feature working.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"action_items"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to provide bindable events to our control.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"dhq_formula"),(0,a.kt)("td",{parentName:"tr",align:null},"if we wish to bind data as default whenever a new control is dropped , it has to be of string data type.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"field_data_model_binding_manual_query"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to define where to add these values given in dhq_formula when a new control is dropped. Eg :- ",(0,a.kt)("inlineCode",{parentName:"td"},'attrs.field_data_model_binding_manual_query = "DATABUILDER()"'))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"field_data_model_binding_manual_query_with_id"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to provide id where we should place the dhq_formula mostly it has same value as field_data_model_binding_manual_query. Eg :- ",(0,a.kt)("inlineCode",{parentName:"td"},'attrs.field_data_model_binding_manual_query_with_id = "DATABUILDER()"'))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"field_data_model_binding_type"),(0,a.kt)("td",{parentName:"tr",align:null},"as we have provided above 2 variables this variable value will be manual_query. Eg :- ",(0,a.kt)("inlineCode",{parentName:"td"},'attrs.field_data_model_binding_type = "manual_query"'))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"dhq_keywords_mapping"),(0,a.kt)("td",{parentName:"tr",align:null},"this variable is used to map keywords dynamically. We just have to add this variable as an empty array ( [] ) and it will be handled dynamically by the package. Eg :-",(0,a.kt)("inlineCode",{parentName:"td"}," attrs.dhq_keywords_mapping = []"))))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Detail Explanation for each above attribute")," :-"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"field_composition_type")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"single")," :- in this Bind Data will look like bind data in Text Input control. It will always give data in string format. It is the default value for new control. Recommended to use when we are building controls that take strings as data input. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"composite")," :- in this Bind Data will look like bind data in Address control. It accepts data as string. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"list")," :- in this Bind Data will look like bind data in Dropdown control. It accepts data as Array. Recommended to use with controls like dropdowns, checkbox, etc. ")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"if we use ",(0,a.kt)("inlineCode",{parentName:"p"},"attrs.field_composition_type = 'composite'")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"attrs.field_composition_type = 'list'")," we have to add 1 more attribute as ",(0,a.kt)("inlineCode",{parentName:"p"},"attrs.field_datatypes = []")," otherwise our control will give an error.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"composite_list")," :- in this Bind Data will look like Table Grid control. It accepts data as Array of objects / json objects. Recommended to use with Display / non_input controls.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"action_items"),"\nWe have to follow this structure for adding events :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'attrs.action_items = {\n  "button_click": {\n    "events": ["click"],\n    "selector": ".control-button"\n  }\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Explanation")," :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'"display_name":{\n"events":["event_name"],\n"selector" : ""\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"display_name")," :- this name is visible at the builder screen in the actions section."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"event_name")," :- this is the event name we wish to give.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"display_name and event_name can be the same.\nby adding these actions will be just visible we have to add code in javascript file to handle these events.")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Combination of attributes"),(0,a.kt)("th",{parentName:"tr",align:null},"control's to see for example"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},'field_composition_type = "single" ',(0,a.kt)("br",null),' Is_master_control = "false" (default)'),(0,a.kt)("td",{parentName:"tr",align:null},"Text input")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},'field_composition_type = "list" ',(0,a.kt)("br",null),' Is_master_control = "true" ',(0,a.kt)("br",null)," If single select :- ",(0,a.kt)("br",null),' Data_type = "string" ',(0,a.kt)("br",null),' field_database_editor_data_format = "single_select" ',(0,a.kt)("br",null)," If multi select :- ",(0,a.kt)("br",null),' Data_type = "list" ',(0,a.kt)("br",null),' field_database_editor_data_format = "multi_select"'),(0,a.kt)("td",{parentName:"tr",align:null},"Dropdown")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},'field_composition_type = "composite_list" ',(0,a.kt)("br",null),' Is_master_control = "true" ',(0,a.kt)("br",null)," allowSchemaFormatting = true ",(0,a.kt)("br",null),' data_type = "string" ',(0,a.kt)("br",null)," field_client_side_get_data_enabled = true"),(0,a.kt)("td",{parentName:"tr",align:null},"Table Grid")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},'data_type = "list" ',(0,a.kt)("br",null),' field_composition_type = "list" ',(0,a.kt)("br",null),' field_database_editor_data_format = "multi_select"'),(0,a.kt)("td",{parentName:"tr",align:null},"Checkbox")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"attrs.field_datatypes = ","[ ",(0,a.kt)("br",null)," field: 'title' ",(0,a.kt)("br",null)," display_name: 'title', ",(0,a.kt)("br",null)," data_type: 'string' ",(0,a.kt)("br",null)," field_database_editor_data_format: 'single_line_text' ",(0,a.kt)("br",null)," , ",(0,a.kt)("br",null)," field: 'subtitle' ",(0,a.kt)("br",null)," display_name: 'subtitle', ",(0,a.kt)("br",null)," data_type: 'string' ",(0,a.kt)("br",null)," field_database_editor_data_format: 'single_line_text' ",(0,a.kt)("br",null)," , ",(0,a.kt)("br",null)," field: 'action_value' ",(0,a.kt)("br",null)," display_name: 'action_value', ",(0,a.kt)("br",null)," data_type: 'string' ",(0,a.kt)("br",null)," field_database_editor_data_format: 'single_line_text' ",(0,a.kt)("br",null)," ]",(0,a.kt)("br",null)," attrs.field_available_in_database_editor = false ",(0,a.kt)("br",null)," attrs.field_editable_in_database_editor = false"),(0,a.kt)("td",{parentName:"tr",align:null},"Label")))),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To debug our coffee script code we can visit ",(0,a.kt)("a",{parentName:"p",href:"https://coffeescript.org/#try"},"this link")," and paste our full coffee section code on the left hand side and we will be able to see the transformed javascript code on the right hand side so we can verify our code using this method."),(0,a.kt)("p",{parentName:"admonition"},"If we get an error message on reload after adding some code then the best way to debug it is using debugger keyword and keeping inspect window on while next reload.")),(0,a.kt)("h3",{id:"control-editor-css-section"},"Control Editor CSS Section"),(0,a.kt)("p",null,"Css section code is applicable for Preview Screen only."),(0,a.kt)("p",null,"So in css section we also get some ready made code as :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},".{{cid}} .component-head-container {\n  font-size: {{label_font_size}}{{label_font_size_unit}};\n  font-weight: {{label_font_weight}}; \n  color: {{label_text_color}}; \n  text-align: {{label_text_alignment}};\n}\n")),(0,a.kt)("p",null,"Explanation :-"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},".{{cid}}")," is compulsory to add before any selector we wish to write css for."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"cid stands for Control ID every time we drop a new control a unique cid is automatically generated by the package.")),(0,a.kt)("p",null,"After ",(0,a.kt)("inlineCode",{parentName:"p"},".{{cid}}")," we can write any css selector and provide css for it."),(0,a.kt)("p",null,"There are two ways of providing values to css keys."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Static values")," :-\nWe can directly provide values as we normally do any css file.")),(0,a.kt)("p",null,"Eg :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},".{{cid}} .Selector_name {\n  font-size : 14px;\n  color : #26BC6A;\n}\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Dynamic Value")," :-")),(0,a.kt)("p",null,"If we have provided configuration in properties and we wish to use that variable here so it can done by writing variable in double curly braces {{variable_name}}"),(0,a.kt)("p",null,"Eg :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'defaultAttributes: (attrs) ->\n  attrs.font_size = 14\n  attrs.color = "#26BC6A"\n')),(0,a.kt)("p",null,"This are the variables used to store font size and color and they can be accessed as"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},".{{cid}} .Selector_name {\n  font-size : {{font_size}}px;\n  color : {{color}};\n}\n")),(0,a.kt)("p",null,"All other things are similar to any other css file."),(0,a.kt)("h3",{id:"control-editor-javascript-section"},"Control Editor Javascript Section"),(0,a.kt)("p",null,"Javascript section code is applicable for Preview Screen only."),(0,a.kt)("p",null,"So in javascript section we also get some ready made code as :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'\nBSCOMPONENTS["sample"] = function() {\n  this.default = {\n      customVariable: "",\n  };\n  this.initComponent = function () {\n      //Initialize your components here, if needed.\n  };\n  this.beforeSubmitValidation = function (obj) {\n      //Control validation will be done here.\n        return true;\n  };\n  this.setValue = function (obj) {\n      //Your control will get data from DronaHQ here.\n      let $valueWrapper = this.$el.find(\'.label\');\n      if(obj){\n          $valueWrapper.text(obj);\n      }else{\n          $valueWrapper.text("");\n      }\n  };\n  this.reset = function (obj) {\n      //Reset your control here.\n  };\n  this.getValue = function (forSubmit) {\n      //Your control should return value to DronaHQ here.\n      let $valueWrapper = this.$el.find(\'.label\');\n      let response = $valueWrapper.text() || "";\n      //the data should be returned in the following structure with your data inside the "response" key\n      return { \'question\': this.model.label, \'value\': response, id: this.model.field_key_name, name: this.model.field_display_key_name };\n  };\n  this.gridLayoutUpdated = function(model,$el){\n      // this callback function will trigger once the layout of a freeflow page updated\n      // you can get control availble height on free flow page by using the following function \n      //getAvailableControlHeight(model) \n  }\n};\nBSCOMPONENTS["sample"].prototype = BaseComponent;\n\n')),(0,a.kt)("p",null,"Javascript File is used to handle javascript events for your control."),(0,a.kt)("p",null,"All method and variable declarations must be inside"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'BSCOMPONENTS["ControlName"] = function () { };\n')),(0,a.kt)("p",null,"It provides six basic methods"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"this.initComponent = function () { }")," :- if we wish to have any kind of initialization for your control then we have to write code for it here.\nAlso binding of all the click events or different events goes in this function."),(0,a.kt)("p",null,"This function is called First and only once in the current execution life cycle."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"this.beforeSubmitValidation = function (obj) { }")," :- this function is empty in normal scenario but if on a page if we have the bpm flow button , and when we click on that button then beforeSubmitValidation function of all controls used on that page is called, so if we wish to use our control with an bpm flow we need to write that logic here."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"this.setValue = function (obj, schema, source) { }")," :- this is the method where we get our binded data in the obj parameter and we have to use it as per our control logic."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"this.reset = function (obj) { }")," :- this method is used to bring control to its default state . In Most of the cases this function is empty."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"this.getValue = function (forSubmit) { }")," :- this method is used to set the return value of our control. It returns the value in a specific format only as :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"return { \n  'question': this.model.label, \n  'value': response, \n  'id': this.model.field_key_name, \n  'name': this.model.field_display_key_name \n};\n")),(0,a.kt)("p",null,"Here we only need to set the ",(0,a.kt)("inlineCode",{parentName:"p"},"'value'")," property and all other things will remain as it is."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"this.gridLayoutUpdated = function(model,$el){ }")," :- this method is mainly used to detect view change, when we want our control to be displayed differently on mobile view and desktop view."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"views are desktop, tablet , mobile landscape , mobile portrait.\nIf we wish to add our user defined functions we can do that but that has to be inside ",(0,a.kt)("inlineCode",{parentName:"p"},'BSCOMPONENTS["ControlName"] = function () { };')," this function only.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Syntax to access variable defined in defaultAttributes")," :-"),(0,a.kt)("p",null,"To access any defaultAttributes variable value we can it from model class as:-"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"this.model.variable_name")),(0,a.kt)("p",null,"Eg :- if we to access cid or font_size stored in defaultAttributes the it can be done as"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"this.model.cid")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"this.model.font_size")),(0,a.kt)("p",null,"Syntax for user defined functions :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"this.FunctionName = function(parameters){\n  // function body;\n}\n")),(0,a.kt)("p",null,"Here parameters are completely optional."),(0,a.kt)("p",null,"Calling of user defined functions :- we can call our user defined functions in any of the basic functions like\n",(0,a.kt)("inlineCode",{parentName:"p"},"this.FunctionName();")),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Sometimes calling a function inside another function we may not get proper scope of this keyword and we may get an error as FunctionName is undefined so to overcome this we can save scope of this in another variable and use it.")),(0,a.kt)("p",null,"Eg :- calling user defined function in setValue"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"this.setValue = function(obj){\n  var self = this;\n  \u2026\n  \u2026\n  self.FunctionName();\n}\n")),(0,a.kt)("p",null,"If we wish to add a global variable we have to follow the same rule as function."),(0,a.kt)("p",null,"Syntax for global variable :-"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"this.variableName;")),(0,a.kt)("p",null,"Some logic for accessing this global variable.(using self)"),(0,a.kt)("p",null,"Package functions to call ",(0,a.kt)("inlineCode",{parentName:"p"},"getValue()")," and action flow on click events or any other events."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"To call getValue you have to use package function\n",(0,a.kt)("inlineCode",{parentName:"p"},"this.initConditionalVisibility(this.model.field_key_name);"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"To bind and trigger any click event or any other event\n",(0,a.kt)("inlineCode",{parentName:"p"},"triggerAction(this.model.field_key_name, 'display_name', 'event_name', e);")))),(0,a.kt)("p",null,"display_name and events_name must be the same as provided in the coffee file."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"here display_ name and event_name must be same as mentioned in coffee's\n",(0,a.kt)("inlineCode",{parentName:"p"},"attrs.action_items"),".")),(0,a.kt)("p",null,"Eg : - for example take a simple click event on a button"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"this.$el.on('click','#button_id',function(e){\n  self.initConditionalVisibility(self.model.field_key_name);\n  triggerAction(self.model.field_key_name, 'button_click', 'button_click', e);\n}\n")),(0,a.kt)("p",null,"More functions that are available in package and we can use them as per our need"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"this.refreshData()")," :- this function is used when we have a refresh button in our UI or we want to refresh data in our control we have to use this method.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"this.startComponentLoader()")," :- if we have a logic in our control to wait for a certain event to happen and till that time if we wish to show a loader we can use this method it takes no parameters."))),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"this.startComponentLoader = function () {\n  if (this.$componentLoader) {\n    this.$componentLoader.removeClass(\"hide\");\n  }\n  this.$el.addClass('component-loading');\n};\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.stopComponentLoader ()")," :- if we have started the component loader then when a certain condition is matched we have to use this method to stop the component loader it also takes no parameters.")),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"this.stopComponentLoader = function () {\n  if (this.$componentLoader) {\n      this.$componentLoader.addClass(\"hide\");\n  }\n  this.$el.removeClass('component-loading');\n};\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.hide()")," :- we have to add this function and write the logic for hiding the control if a certain condition is matched.")),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'this.hide = function () {\n  this.$el.addClass("hide");\n};\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.show()")," :- we have to add this function and write the logic for showing the control if a certain condition is matched. (reverse of hide).")),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'this.show = function () {\n  this.$el.removeClass("hide");\n};\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.showError(msg)")," :- In the handlebars and Coffee file view section we have an fb-field-error-message class to show error messages. We just need to call this function and pass the error message we want to show in the parameter.")),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'this.showError = function (msg) {\n  var $errorMessage = this.$el.find(">.fb-field-error-message");\n  if ($errorMessage) {\n      this.$el.addClass("fb-field-has-error");\n      $errorMessage.html(msg);\n  }\n};\n')),(0,a.kt)("p",null,'Eg :- calling it as per our need - this.showError("no data found");'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.appendError(msg)")," :- if we want to handle multiple error cases and show all the error messages we can use this method by passing the error message in the parameter and it will be appended automatically.")),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'this.appendError = function (msg) {\n  var $errorMessage = this.$el.find(">.fb-field-error-message");\n  if ($errorMessage) {\n        this.$el.addClass("fb-field-has-error");\n        var previousError = $errorMessage.html();\n        $errorMessage.html(previousError + "\\n" + msg);\n  }\n};\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.clearError()")," :- this function is used to clear the error message already visible on the screen it takes no parameters.")),(0,a.kt)("p",null,"If we wish to have code for this directly in control than we can add this code :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'this.clearError = function () {\n  var $errorMessage = this.$el.find(">.fb-field-error-message");\n  if ($errorMessage) {\n          this.$el.removeClass("fb-field-has-error");\n          $errorMessage.html("");\n  }\n};\n')),(0,a.kt)("h3",{id:"control-editor-handlebars-section"},"Control Editor Handlebars Section"),(0,a.kt)("p",null,"Handlebars section is used to write HTML content for Preview screen only."),(0,a.kt)("p",null,"Please refer ",(0,a.kt)("a",{parentName:"p",href:"https://handlebarsjs.com/guide/"},"Handlebars guide")," for basics of handlebars."),(0,a.kt)("p",null,"So in Handlebars section we get a ready made structure like this :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-handlebars"},'<script id="ctrl-template-fenil" type="text/x-handlebars-template">\n<div class="fb-field-wrapper response-field-{{field_type}} {{cid}} {{#if hidden}}hide{{/if}} {{#if field_fullview}} fb-fullview-field {{/if}} {{#if field_responsive}}fb-responsive-field{{/if}} {{#if disabled}}isDisabled{{/if}}" data-control="text" data-requiredfield="{{required}}" style="position:relative">\n  <div class="component-loader hide {{#if disabled}}{{else}} isLoaderWhite{{/if}} ">\n    <i class=" notched circle loading icon"></i>\n  </div>\n  <div class="component-head-container {{#if label}}{{else}}{{#if required}}{{else}}hide{{/if}}{{/if}}">\n    <span>{{#if label_hidden}}{{else}}{{label}}{{/if}}{{#if required}}<span class="requiredAstrick">*</span>{{/if}}</span>\n  </div>\n  <div class="wrapper {{#if disabled}}isDisabled{{/if}}">\n    <div class="label">{{label_value}}</div>\n  </div>\n  <div class="fb-field-error-message"></div>\n</div>\n<\/script>\n')),(0,a.kt)("p",null,"We should always write our html logic inside"),(0,a.kt)("p",null,"only and please do not remove any code present outside the wrapper class because it may cause unnecessary errors.\nEg :-"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<div class="wrapper">\n  <div class="main">\n    Any HTML logic for our control.\n  </div>\n</div>\n')),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"In-depth knowledge of handlebars is not necessary, just basic HTML knowledge is required, we can add or remove DOMElements directly using the javascript file.")),(0,a.kt)("p",null,"In the javascript file using JQuery we can easily find DOM Element and manipulate it as per our need."),(0,a.kt)("p",null,"Eg :- ",(0,a.kt)("inlineCode",{parentName:"p"},"this.$el.find('.main')"),"; // this will return a DOM Element with class main."),(0,a.kt)("p",null,"So we can use it anyway we want , we can also use Vanilla JS as well for this manipulation."),(0,a.kt)("h2",{id:"control-life-cycle"},"Control Life Cycle"),(0,a.kt)("h3",{id:"builder-view"},"Builder View"),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-life-cycle-builder.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Control life cycle for Builder screen."))),(0,a.kt)("p",null,"Control will be rendered as per the HTML,CSS and Script written in the view section and viewJs is called once."),(0,a.kt)("p",null,"When we switch between desktop view and mobile view, the onResolutionChange section is called."),(0,a.kt)("p",null,"When we bind data from different sources and click on save button is clicked sudoComponentFunctions section is called and control is re-rendered again."),(0,a.kt)("p",null,"When we drag control or change any property from the properties section the full control is re-rendered , so this is the reason we don\u2019t bring any control related event to the builder screen."),(0,a.kt)("h3",{id:"preview--package"},"Preview / package"),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-life-cycle-preview.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Control life cycle for Builder screen."))),(0,a.kt)("p",null,"The UI will be rendered as per the Handlebar and Css file."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.intComponent()")," method is called first and it will be called only once during the whole life cycle."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.setValue(obj)")," method is called after this.reset() method and obj will contain the data that you have binded to your control and you have to handle your data in this function if there\u2019s any error in the data this.showError() can be called."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"this.getValue()")," if you want your control to return some value that can be binded to any other control you have to set that data in the value parameter by following the syntax of return in this function never called if control is not binded to any other control.")),(0,a.kt)("h2",{id:"dos-and-donts"},"Do\u2019s and Don\u2019ts"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Always start with the Preview part of control and just to start with write basic HTML in handlebars and relevant css in css file by following the syntax."),(0,a.kt)("li",{parentName:"ol"},"Add all the properties that you feel are needed for the smooth functioning of the control."),(0,a.kt)("li",{parentName:"ol"},"It is not always necessary to replicate everything on the builder view as well. You can keep this part with default code as well , so the look and feel of control will not be visible on builder view but it will not affect the performance of your control."),(0,a.kt)("li",{parentName:"ol"},"If you wish to bring the same look and feel to the builder view as well then you have to follow coffee script convention."),(0,a.kt)("li",{parentName:"ol"},'If you wish to debug your code you can use the "debugger\u201d keyword in coffee or javascript.')),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Never bring your controls click or any such events to the builder view because it will make your builder view heavy and performance may get affected.")),(0,a.kt)("h2",{id:"debugging-control-while-building"},"Debugging Control while building"),(0,a.kt)("p",null,"There are many ways to debug our control while building"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Using basic ",(0,a.kt)("inlineCode",{parentName:"li"},"console.log")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"alert")," methods in the javascript file."),(0,a.kt)("li",{parentName:"ol"},"Using ",(0,a.kt)("inlineCode",{parentName:"li"},"debugger")," keyword inside the function we wish to debug, For this as soon as we run the code we have to keep inspect screen on so the debugger will stop the execution flow where er have placed the debugger keyword."),(0,a.kt)("li",{parentName:"ol"},"Advance debugging - (always select screen that we wish to debug code on like this)")),(0,a.kt)("figure",null,(0,a.kt)(o.Z,{src:"/img/advanced-concepts/custom-control-ide/basics/control-editor-console-debugging.png",alt:"Simple Database GUI",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Console screen."))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"For Preview")," :- First select the screen as ",(0,a.kt)("inlineCode",{parentName:"p"},"previewFrame (preview)"),", then in the console of the inspect window write ",(0,a.kt)("inlineCode",{parentName:"p"},"Components.ControlName.FunctionName")," and press Enter , click on the function code that is opened. Click on line number to apply debugger and right click in the preview screen and click on ",(0,a.kt)("inlineCode",{parentName:"p"},"reload frame")," and your code will stop at that line number."),(0,a.kt)("p",null,"We can hover mouse over variables to see what values they contain till this line is executed."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"ways to open inspect window pressing ",(0,a.kt)("inlineCode",{parentName:"p"},"F12 key")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"ctrl + i")," on keyboard or right click inside builder or preview screen and click on last option inspect.")))}f.isMDXComponent=!0}}]);