"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[51674],{94185:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>d,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>m});n(67294);var a=n(3905),i=n(86291);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function l(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}const s={sidebar_position:1},d="Configure Okta SAML SSO",p={unversionedId:"sso-guides/configure-okta-saml-sso",id:"sso-guides/configure-okta-saml-sso",title:"Configure Okta SAML SSO",description:"Prerequisites",source:"@site/docs/sso-guides/configure-okta-saml-sso.md",sourceDirName:"sso-guides",slug:"/sso-guides/configure-okta-saml-sso",permalink:"/sso-guides/configure-okta-saml-sso",draft:!1,tags:[],version:"current",lastUpdatedAt:1697705514,formattedLastUpdatedAt:"Oct 19, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docSidebar",previous:{title:"Configure Okta OIDC",permalink:"/sso-guides/configure-okta-oidc"},next:{title:"Configure OneLogin OIDC",permalink:"/sso-guides/configure-onelogin-oidc"}},u={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configure in OKTA",id:"configure-in-okta",level:2},{value:"Assign Users",id:"assign-users",level:3},{value:"Configure in DronaHQ",id:"configure-in-dronahq",level:2},{value:"OKTA SAML in Action",id:"okta-saml-in-action",level:2}],c={toc:m},k="wrapper";function g(t){var{components:e}=t,n=l(t,["components"]);return(0,a.kt)(k,r(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){o(t,e,n[e])}))}return t}({},c,n),{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"configure-okta-saml-sso"},"Configure Okta SAML SSO"),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"To set up Okta SAML SSO in DronaHQ, you will need:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"An Okta account with permissions to create an SAML integration Application."),(0,a.kt)("li",{parentName:"ol"},"Manage Users access on self-hosted DronaHQ instance or DronaHQ Cloud to configure SSO configurations.")),(0,a.kt)("h2",{id:"configure-in-okta"},"Configure in OKTA"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Navigate to the OKTA dashboard, Go to Admin section. From the left side menu, go to ",(0,a.kt)("inlineCode",{parentName:"li"},"Applications -> Applications"),". ")),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-menu-application.png",alt:"Navigate to Application",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Navigate to Application"))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Download and open DronaHQ metadata file. To locate this file, Go to ",(0,a.kt)("inlineCode",{parentName:"p"},"DronaHQ -> Manage Users -> SSO CONFIGURATION -> + Add SSO -> SAML 2.0"),". Under ",(0,a.kt)("inlineCode",{parentName:"p"},"Entity ID and Metadata URL"),", open this url file that will be useful in next steps. ")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Select ",(0,a.kt)("inlineCode",{parentName:"p"},"Create App Integration")," and configure the app with below field options -"))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Field"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Sign-on method"),(0,a.kt)("td",{parentName:"tr",align:null},"SAML 2.0")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"App Integration Name"),(0,a.kt)("td",{parentName:"tr",align:null},"Give a suitable name to your application. Eg - ",(0,a.kt)("inlineCode",{parentName:"td"},"DronaHQ OKTA SSO"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Logo"),(0,a.kt)("td",{parentName:"tr",align:null},"(optional) you can provide a logo for your app.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Single sign-on URL"),(0,a.kt)("td",{parentName:"tr",align:null},"It is the location where SAML assertion is sent with an ",(0,a.kt)("inlineCode",{parentName:"td"},"HTTP POST"),", known as ",(0,a.kt)("inlineCode",{parentName:"td"},"SAML Assertion Consumer Service URL"),". Locate this in the Metadata downloaded and paste it here. Ex - ",(0,a.kt)("a",{parentName:"td",href:"https://studio.dronahq.com/callback/saml"},"https://studio.dronahq.com/callback/saml"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Audience URL"),(0,a.kt)("td",{parentName:"tr",align:null},"This, we have to fill with entity ID present in the same Metadata downloaded file. Copy and paste the same. Ex - ",(0,a.kt)("a",{parentName:"td",href:"https://studio.dronahq.com/saml/metadata"},"https://studio.dronahq.com/saml/metadata"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Attribute Statements"),(0,a.kt)("td",{parentName:"tr",align:null},"This is an important part where will provide two attributes of name and email with values user.firstname and user.email respectively. You can add other user attributes such as location, department, etc. that you can configure in DronaHQ in next steps")))),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-saml-attribute.png",alt:"Attribute Statements",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Attribute Statements"))),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-saml-config.png",alt:"SAML App Setup",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"SAML App Setup"))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Click Next. Fill in the feedback form and then ",(0,a.kt)("inlineCode",{parentName:"li"},"finish"),".")),(0,a.kt)("h3",{id:"assign-users"},"Assign Users"),(0,a.kt)("p",null,"Here we can add all the people related to the organization for the SAML SSO configuration."),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-saml-assignment.png",alt:"Assignment",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Assignment"))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to ",(0,a.kt)("inlineCode",{parentName:"li"},"Assignments -> Assign -> Assign to people -> Click assign for the user -> Done"),".")),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-saml-add-people.png",alt:"Assign Users",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Assign Users"))),(0,a.kt)("p",null,"Now that we have created our application on Okta for SAML, we will now configure SAML SSO on DronaHQ. "),(0,a.kt)("h2",{id:"configure-in-dronahq"},"Configure in DronaHQ"),(0,a.kt)("p",null,"In order to configure SAML in DronaHQ, we will need metadata file of OKTA. To get this file from OKTA, Go to ",(0,a.kt)("inlineCode",{parentName:"p"},"Okta SAML integration")," and under ",(0,a.kt)("inlineCode",{parentName:"p"},"Sign on")," there is ",(0,a.kt)("inlineCode",{parentName:"p"},"SAML Signing Certificates"),"."),(0,a.kt)("p",null,"Here we can find all the available active/inactive certificate along with the option to create a new certificate."),(0,a.kt)("p",null,"Click on ",(0,a.kt)("inlineCode",{parentName:"p"},"Actions -> View IdP Metadata of an active certificate")," and it will open up a tab with metadata details."),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-saml-view-metadata.png",alt:"View OKTA Metadata file",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"View OKTA Metadata file"))),(0,a.kt)("p",null,"In the same screen, Click on ",(0,a.kt)("inlineCode",{parentName:"p"},"Actions ->  Download certificate")," and it will download ",(0,a.kt)("inlineCode",{parentName:"p"},".cer")," file that you can keep it for later use."),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-okta-saml-metadata.png",alt:"OKTA Metadata file",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"OKTA Metadata file"))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Now that we have metadata file, In DronaHQ, Go to ",(0,a.kt)("inlineCode",{parentName:"li"},"Manage Users -> SSO Configuration -> + ADD SSO -> SAML 2.0"))),(0,a.kt)("p",null,"Enter form with below fields -"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Field"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Name"),(0,a.kt)("td",{parentName:"tr",align:null},"Provide Friendly Name of this SSO configuration")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Entity ID"),(0,a.kt)("td",{parentName:"tr",align:null},"The entity ID is present on Okta metadata file. Copy the ID and paste it.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Login URL / SSO URL"),(0,a.kt)("td",{parentName:"tr",align:null},"Enter the details of location of ",(0,a.kt)("inlineCode",{parentName:"td"},"singlesignonservice")," from Okta metadata file for POST method.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"X509 public certificate"),(0,a.kt)("td",{parentName:"tr",align:null},"X509Certificate file in ",(0,a.kt)("inlineCode",{parentName:"td"},".cer")," format. This file we have downloaded from OKTA in previous step can be used here.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Binding type"),(0,a.kt)("td",{parentName:"tr",align:null},"Enter ",(0,a.kt)("inlineCode",{parentName:"td"},"HTTP POST"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Restricted Domain"),(0,a.kt)("td",{parentName:"tr",align:null},"Enter domain name for which you want your users to login with for this SSO Configuration. You can add multiple domain names as well. eg - ",(0,a.kt)("inlineCode",{parentName:"td"},"domain1.com , domain2.com"),". DronaHQ will automatically redirect to SSO url when we encounter any user\u2019s sign in request with an email id belonging to the given restricted domain.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Want Auth request signed"),(0,a.kt)("td",{parentName:"tr",align:null},"Keep this default setting as ",(0,a.kt)("inlineCode",{parentName:"td"},"False"),".")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Add Claim List"),(0,a.kt)("td",{parentName:"tr",align:null},"We have already assigned Email and Name on Okta while integrating SAML. We will now enter same key name - ",(0,a.kt)("inlineCode",{parentName:"td"},"email")," and ",(0,a.kt)("inlineCode",{parentName:"td"},"name")," and map it to ",(0,a.kt)("inlineCode",{parentName:"td"},"DHQ User Name")," and ",(0,a.kt)("inlineCode",{parentName:"td"},"DHQ User Email")," respectively.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Enable JIT user provisioning"),(0,a.kt)("td",{parentName:"tr",align:null},"Toggle this ",(0,a.kt)("inlineCode",{parentName:"td"},"ON")," so that you won\u2019t have to manually invite each user to DronaHQ first.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Enable SCIM User Provisioning"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable this in case you want to create, update and deactivate User accounts at your OKTA portal and sync it with DronaHQ user management.")))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Save the draft. Again navigate back to the SSO configuration option. You can see the newly created SAML.")),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-dronahq-okta-saml-draft.png",alt:"SAML in Draft state",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"SAML in Draft state"))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"You can click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Test SSO")," button and it will open SSO Login url in a popup window.")),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-dronahq-okta-saml-signin-url.png",alt:"SAML Signin URL",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"SAML Signin URL"))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Once you login successfully and if everything is set up correctly, then finally you will see a success message at the bottom.")),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-dronahq-okta-oauth-success.png",alt:"SAML Signin Success",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"SAML Signin Success"))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Now, that testing is successful, you can click on the more option for above SSO configuration and click on ",(0,a.kt)("inlineCode",{parentName:"li"},"Activate")," to make it live.")),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-dronahq-okta-saml-active.png",alt:"SAML SSO Active",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"SAML SSO Active"))),(0,a.kt)("h2",{id:"okta-saml-in-action"},"OKTA SAML in Action"),(0,a.kt)("p",null,"Now, since our OKTA SAML SSO is live, we check in either DronaHQ End user portal - ",(0,a.kt)("a",{parentName:"p",href:"https://web.dronahq.io"},"Web"),", ",(0,a.kt)("a",{parentName:"p",href:"https://play.google.com/store/apps/details?id=com.drona5"},"Android")," or ",(0,a.kt)("a",{parentName:"p",href:"https://apps.apple.com/us/app/dronahq/id905354460"},"iOS")," and see our configured okta saml sso in action."),(0,a.kt)("p",null,"Simply go to DronaHQ End user webapp and enter your email id with domain that matches the configured restricted domain specified in SSO configuration and Click ",(0,a.kt)("inlineCode",{parentName:"p"},"Continue"),"."),(0,a.kt)("figure",null,(0,a.kt)(i.Z,{src:"/img/sso/guides/sso-dronahq-okta-saml-webapp.png",alt:"SAML in WebApp",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"SAML in WebApp"))),(0,a.kt)("p",null,"Instead of asking for password, it asks for Login via Okta SAML SSO provider. Click on it and open a popup window of okta and the user can login with Okta login credentials."),(0,a.kt)("p",null,"Go to ",(0,a.kt)("inlineCode",{parentName:"p"},"Manage User")," section on DronaHQ and you will see the new user created since ",(0,a.kt)("inlineCode",{parentName:"p"},"JIT")," was enabled."))}g.isMDXComponent=!0}}]);