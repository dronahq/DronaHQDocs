"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[33033],{72685:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>f,frontMatter:()=>l,metadata:()=>d,toc:()=>p});n(67294);var a=n(3905),r=n(86291);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const l={sidebar_position:1,title:"Connector library"},u="Connector library",d={unversionedId:"binding-data/data-queries/connector-library",id:"binding-data/data-queries/connector-library",title:"Connector library",description:"DronaHQ provides you with a comprehensive platform to consolidate information from various tables in a datasource when building applications. With the ability to create queries, you can effortlessly fetch data from different tables/documents and seamlessly present it in a cohesive manner. Beyond just fetching data, queries empower you to perform essential tasks such as inserting, updating, or removing data from a datasource. Additionally, you can easily bind this data to widgets, enabling a dynamic and interactive user experience.",source:"@site/docs/binding-data/data-queries/connector-library.md",sourceDirName:"binding-data/data-queries",slug:"/binding-data/data-queries/connector-library",permalink:"/binding-data/data-queries/connector-library",draft:!1,tags:[],version:"current",lastUpdatedAt:1717045998,formattedLastUpdatedAt:"May 30, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Connector library"},sidebar:"docSidebar",previous:{title:"Data queries",permalink:"/category/data-queries"},next:{title:"Connector queries",permalink:"/binding-data/data-queries/connector-queries"}},c={},p=[{value:"Using connector library in data queries",id:"using-connector-library-in-data-queries",level:2},{value:"Meta",id:"meta",level:2},{value:"Environments",id:"environments",level:2},{value:"Variables",id:"variables",level:2},{value:"Transform response",id:"transform-response",level:2},{value:"Write Javascript",id:"write-javascript",level:3},{value:"Write DQL expressions",id:"write-dql-expressions",level:3},{value:"Filter Objects",id:"filter-objects",level:3},{value:"Filter Keys",id:"filter-keys",level:3},{value:"Cursor Based Pagination",id:"cursor-based-pagination",level:2},{value:"Raw Response",id:"raw-response",level:2},{value:"Transformed Response",id:"transformed-response",level:2},{value:"Advanced",id:"advanced",level:2}],h={toc:p},m="wrapper";function f(e){var{components:t}=e,n=s(e,["components"]);return(0,a.kt)(m,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}({},h,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"connector-library"},"Connector library"),(0,a.kt)("p",null,"DronaHQ provides you with a comprehensive platform to consolidate information from various tables in a datasource when building applications. With the ability to create queries, you can effortlessly fetch data from different tables/documents and seamlessly present it in a cohesive manner. Beyond just fetching data, queries empower you to perform essential tasks such as inserting, updating, or removing data from a datasource. Additionally, you can easily bind this data to widgets, enabling a dynamic and interactive user experience."),(0,a.kt)("h2",{id:"using-connector-library-in-data-queries"},"Using connector library in data queries"),(0,a.kt)("p",null,"You can navigate and click on ",(0,a.kt)("inlineCode",{parentName:"p"},"Data queries -> + -> Connector library")," to add a new data query. You will see a list of added connectors in your account followed by the queries or APIs created under each connector as a library which can be used across multiple apps. "),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/connector-library.png",alt:"Connector library",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Connector Library"))),(0,a.kt)("p",null,"You can select any of the query added in the library and you will see a model with the following sections:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#meta"},"Meta")," - Details of the data query including the name using which it can be referenced."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#environments"},"Environments")," - For ready APIs provided by DronaHQ you can configure different accounts for different environments."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#variables"},"Variables")," - All dynamic variables are here which can be configured with the value that you want to pass."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#transform-response"},"Transform response")," - Different options to transform the response received from the connector query."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#raw-response"},"Response Raw")," - Raw response received from the connector query."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#transformed-response"},"Response Transformed")," - Response after the transformation is run on the raw data."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#advanced"},"Advanced")," - Advanced configurations while running this data query.")),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/configure-library.png",alt:"Connector library",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Configure from the Connector Library"))),(0,a.kt)("h2",{id:"meta"},"Meta"),(0,a.kt)("p",null,"You can configure the unique name of your data query here and also check the actual API call or Database query which has been configured in the connector library. There is another dropdown of ",(0,a.kt)("inlineCode",{parentName:"p"},"Run query")," which has the options for the query to auto execute on change of the variables or manually trigger the execution."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/connector-library-meta.png",alt:"Meta info",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Data query meta"))),(0,a.kt)("h2",{id:"environments"},"Environments"),(0,a.kt)("p",null,"This section is visible only with third party ready APIs provided by DronaHQ and you can select any of the accounts added in that connector and map it to a specific environment. This will make sure that the particular account is used when the app is running in the specified environment. "),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/connector-library-environments.png",alt:"Environments",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Environments"))),(0,a.kt)("h2",{id:"variables"},"Variables"),(0,a.kt)("p",null,"All the dynamic variables used while creating a query will be listed here and you can map the actual values that should be passed along with a test value that you can use to test during the configuration stage. For e.g. you might want to configure the ",(0,a.kt)("inlineCode",{parentName:"p"},"offset")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"limit")," of the tablegrid control and map it to the offset and limit in the SQL query you have to run pagination."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/connector-library-variables.png",alt:"Variables",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Dynamic variables"))),(0,a.kt)("admonition",{title:"Please Note",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"You can refresh the raw response with the test values and check the response that is fetched to make sure your queries are running fine.")),(0,a.kt)("h2",{id:"transform-response"},"Transform response"),(0,a.kt)("p",null,"This section allows you to transform the raw data received from the server and manipulate it to get it in the format of your choice. You can make use of the ",(0,a.kt)("a",{parentName:"p",href:"/app-scripting-and-code/import-js-libraries"},"JS libraries")," and ",(0,a.kt)("a",{parentName:"p",href:"/app-scripting-and-code/import-js-libraries"},"JS objects")," here as well. The output of this transformation will be seen in the transformed response section and will be the final output of the Data query for the rest of the app. "),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/transform-response.png",alt:"Transform response",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Transform response"))),(0,a.kt)("p",null,"You can transform the response in 4 different ways:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#write-javascript"},"Write Javascript")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#filter-objects"},"Filter objects")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#filter-keys"},"Filter keys")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/binding-data/data-queries/dronahq-query-language"},"Write DQL | DronaHQ Query Language"))),(0,a.kt)("h3",{id:"write-javascript"},"Write Javascript"),(0,a.kt)("p",null,"You can write your own JS script here which can utilize the JS Libraries (inbuilt and imported), JS objects and transform the raw response. In this example I am fetching limited keys from the google sheet raw response and also converting one of the comma separated values into an array."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/write-js.png",alt:"Writing JS",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Writing Javascript"))),(0,a.kt)("p",null,"The following example is of a raw response and the JS written to transform it into the required JSON output in the transformed section. "),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Raw Response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "range": "Sheet1!A2:Z10",\n  "majorDimension": "ROWS",\n  "values": [\n    {\n      "A": "John Doe",\n      "B": "John",\n      "C": "9",\n      "D": "XL",\n      "E": "Men",\n      "F": "Batsman,Fielder",\n      "G": "Non Veg",\n      "H": "B",\n      "I": "605",\n      "J": "9820000000",\n      "K": "Yes",\n      "L": "No",\n      "M": "18 - 55",\n      "N": "John",\n      "O": "2000",\n      "RowNumber": 2\n    }\n  ]\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"JS code")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'function transform( data ) {\n data = data.values.map(value => {\n  return {\n    name: value.A,\n    "diet.plan": value.G,\n    "type.of.player": value.F.split(",")\n  };\n});\nreturn data;\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Transformed Response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "name": "John Doe",\n    "type.of.player": [\n      "Batsman",\n      "Fielder"\n    ],\n    "diet_plan": "Non Veg"\n  },\n')),(0,a.kt)("h3",{id:"write-dql-expressions"},"Write DQL expressions"),(0,a.kt)("p",null,"DQL or DronaHQ Query Language serves as an efficient query and transformation tool for JSON data, drawing inspiration from the 'location path' concepts found in XPath 3.1. This connection enables the formulation of complex queries through a condensed and user-friendly notation. The language includes a comprehensive assortment of pre-established operators and functions that facilitate the manipulation and amalgamation of the extracted information. Furthermore, the results of these queries can be molded into any desired JSON output arrangement, utilizing well-known JSON object and array constructs. Along with the capability to formulate user-specific functions, this allows for the crafting of advanced expressions designed to handle any conceivable JSON query or transformation challenge."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"/binding-data/data-queries/dronahq-query-language"},"You can read more about it here")),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/dql-transform.png",alt:"DQL in transformation",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"DQL in transform section"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"DQL Expression")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},"$.Player_name\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Transformed Response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "Raujesh Agarrwal",\n  "Kalpesh Jain",\n  "Vinod beriwal",\n  "Faraz",\n  "Abrar Kherani",\n  "Ruchir tiwari",\n  "Tanveer Madaan",\n]\n')),(0,a.kt)("h3",{id:"filter-objects"},"Filter Objects"),(0,a.kt)("p",null,"You can define your conditions here in the following format to filter out the objects from your raw response. This will filter and get only those objects from the array which meet this defined criteria. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"{{data.id > 10}}\n")),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/filter-objects.png",alt:"Filter Objects",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Filter Objects"))),(0,a.kt)("admonition",{title:"Please Note",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This filtering will work only if the raw response is in an object of an array format.")),(0,a.kt)("h3",{id:"filter-keys"},"Filter Keys"),(0,a.kt)("p",null,"In this section you can select the keys from the dropdown which you want to be filtered and the final transformed response will contain only those keys and the rest will be ignored. "),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/filter-keys.png",alt:"Filter Keys",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Filter Keys"))),(0,a.kt)("admonition",{title:"Please Note",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"There are times when the keys might not be present while testing and you would still be able to configure them using the option ",(0,a.kt)("inlineCode",{parentName:"p"},"keys missing?"),". Also this will work only on JSON data which isn't too nested.")),(0,a.kt)("p",null,"With the above configurations in the filter objects and keys we can transform the Raw response below to the required transformed response:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Raw Response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {\n    "id": 10,\n    "avatar": "https://dronamobilepublic.s3.amazonaws.com/DRONA5_Team2050/content/app/images/public/dictaipsamet_V4FmM.png",\n    "fullname": "Santino Wyman",\n    "department": "Event Managemen",\n    "address": "jaipur",\n    "email": "santino.wyman@example.com",\n    "birthdate": "19-Jan-85"\n  },\n  {\n    "id": 12,\n    "avatar": "https://dronamobilepublic.s3.amazonaws.com/DRONA5_Team2050/content/app/images/public/laborumvoluptasporro_1kxD1.png",\n    "fullname": "Candace Kunze test",\n    "department": null,\n    "address": "81455 Lindgren Spurs test",\n    "email": "candace.kunze@example.com",\n    "birthdate": "19-Jan-78"\n  }\n  ]\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Transformed Response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "id": 12,\n    "fullname": "Candace Kunze test",\n    "department": null\n  }\n]\n')),(0,a.kt)("h2",{id:"cursor-based-pagination"},"Cursor Based Pagination"),(0,a.kt)("p",null,"In cursor based pagination, your API response should have a key which points to the next page offset. It might also have a ",(0,a.kt)("inlineCode",{parentName:"p"},"has More Data")," key which denotes if there is more data to come or not.\nIt needs to have TRUE/FALSE or 0/1 as values. Do enable the below toggle in case your API supports cursor based pagination."),(0,a.kt)("p",null,"Cursor Based Pagination\nOffset Key : Specify the key name used in your API response that contains the offset value for the next page. This key helps the pagination mechanism know where to start fetching the next set of records."),(0,a.kt)("p",null,"Has More Key : Configure this key if your connector responds with a key which indicates whether we have reached the last page. If not configured, by default, a missing offset key in the response or an empty string value of the offset key in the response will be considered for detecting the last page."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/cursor-pagination.jpeg",alt:"Cursor Pagination",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Cursor Based Pagination."))),(0,a.kt)("h2",{id:"raw-response"},"Raw Response"),(0,a.kt)("p",null,"This tab will save and show you the actual response received from the API or Database query. "),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/raw-response.png",alt:"Raw Response",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Raw Response"))),(0,a.kt)("admonition",{title:"Please Note",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"DronaHQ by default converts the Database responses in JSON format. ")),(0,a.kt)("h2",{id:"transformed-response"},"Transformed Response"),(0,a.kt)("p",null,"This tab shows the transformed response after the transformations have been run. This will be the output of the data query that will be available across the app."),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/transformed-response.png",alt:"Transformed Response",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Transformed Response"))),(0,a.kt)("h2",{id:"advanced"},"Advanced"),(0,a.kt)("p",null,"In the advanced section you can write a condition when you don't want to execute this query. This is generally used in places where if there are dependent dynamic variables which send values like null on which you don't want to run the query. Also when you have JSON objects with keys which have special characters or emojis and you want to sanitize those keys you can toggle ",(0,a.kt)("inlineCode",{parentName:"p"},"ON")," the ",(0,a.kt)("inlineCode",{parentName:"p"},"Sanitize keys")," property. "),(0,a.kt)("figure",null,(0,a.kt)(r.Z,{src:"/img/data-queries/advanced.png",alt:"Advanced",width:"100%",mdxType:"Thumbnail"}),(0,a.kt)("figcaption",{align:"center"},(0,a.kt)("i",null,"Advanced"))))}f.isMDXComponent=!0}}]);