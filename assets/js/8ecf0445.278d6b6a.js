"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[84797],{46577:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>b,frontMatter:()=>s,metadata:()=>d,toc:()=>p});a(67294);var i=a(3905),r=a(86291);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function l(e,t){if(null==e)return{};var a,i,r=function(e,t){if(null==e)return{};var a,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={sidebar_position:2,title:"SQL - Query & Analysis"},u=void 0,d={unversionedId:"dashboard-dronahq/working-with-data/sql-labs",id:"dashboard-dronahq/working-with-data/sql-labs",title:"SQL - Query & Analysis",description:"DronaHQ dashboard provides a dedicated workspace for user to work with data using SQL queries. This primary usage of SQL Labs is to create virtual datasets. This enables the combining of different schemas from different connectors available in the dashboard. User gets the freedom of populating data according to their need while using SQL queries. Alongside, there are other benefits provided like:",source:"@site/docs/dashboard-dronahq/working-with-data/sql-labs.md",sourceDirName:"dashboard-dronahq/working-with-data",slug:"/dashboard-dronahq/working-with-data/sql-labs",permalink:"/dashboard-dronahq/working-with-data/sql-labs",draft:!1,tags:[],version:"current",lastUpdatedAt:1723637125,formattedLastUpdatedAt:"Aug 14, 2024",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"SQL - Query & Analysis"},sidebar:"docSidebar",previous:{title:"Dashboard data -  Filtering & Drilling",permalink:"/dashboard-dronahq/working-with-data/filtering-and-drilling"},next:{title:"SQL Templating",permalink:"/dashboard-dronahq/working-with-data/sql-templating"}},h={},p=[{value:"Understanding SQL Workspace",id:"understanding-sql-workspace",level:2},{value:"Multi-tab Queries",id:"multi-tab-queries",level:2},{value:"SQL Editor",id:"sql-editor",level:2},{value:"Query manager tab",id:"query-manager-tab",level:2},{value:"SQL Editor Tabs",id:"sql-editor-tabs",level:2},{value:"Results tab",id:"results-tab",level:3},{value:"Considerations When Executing Queries",id:"considerations-when-executing-queries",level:4},{value:"Handling Query Failures",id:"handling-query-failures",level:4},{value:"Query History Tab",id:"query-history-tab",level:3}],c={toc:p},m="wrapper";function b(e){var{components:t}=e,a=l(e,["components"]);return(0,i.kt)(m,o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){n(e,t,a[t])}))}return e}({},c,a),{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"DronaHQ dashboard provides a dedicated workspace for user to work with data using SQL queries. This primary usage of SQL Labs is to create virtual datasets. This enables the combining of different schemas from different connectors available in the dashboard. User gets the freedom of populating data according to their need while using SQL queries. Alongside, there are other benefits provided like:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Browse the metadata of the database,"),(0,i.kt)("li",{parentName:"ul"},"Running multiple queries with multi-tab feature,"),(0,i.kt)("li",{parentName:"ul"},"A search engine to find queries executed in the past,"),(0,i.kt)("li",{parentName:"ul"},"Provide parameters to the query,"),(0,i.kt)("li",{parentName:"ul"},"Direct access to chart building, download as CSV, and more.")),(0,i.kt)("p",null,"While the most of the work happens in ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL Labs")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Saved Queries"),", we can access to all the past queries from ",(0,i.kt)("inlineCode",{parentName:"p"},"Query History"),"."),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/sql-labs.jpeg",alt:"Expose database in SQL Lab toggle.",mdxType:"Thumbnail"})),(0,i.kt)("h2",{id:"understanding-sql-workspace"},"Understanding SQL Workspace"),(0,i.kt)("p",null,"The very start point for creating a SQL query is to select the schema. Browse to and select different schema within the datasource, provided that Expose in SQL Lab is enabled in the database."),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/query.jpeg",alt:"SQL query editor",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"SQL query editor"))),(0,i.kt)("admonition",{title:"NOTE",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"The database but be exposed in SQL Lab. To ensure that this setting is enabled, browse to your ",(0,i.kt)("inlineCode",{parentName:"p"},"connectors")," and select the Edit pencil icon. Then select Advanced and expand the SQL Lab section."),(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Expose database in SQL Lab")," field should be selected."),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/expose.jpeg",alt:"Expose database in SQL Lab toggle.",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"Expose database in SQL Lab toggle.")))),(0,i.kt)("h2",{id:"multi-tab-queries"},"Multi-tab Queries"),(0,i.kt)("p",null,"Multiple tabs for each query enable you to easily switch between different queries within one interface."),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/multi.jpeg",alt:"Configure mulitple queries at once",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"Configure mulitple queries at once"))),(0,i.kt)("h2",{id:"sql-editor"},"SQL Editor"),(0,i.kt)("p",null,"Write in the SQL Editor panel which allows different data source semantics / comments and runs one query at a time. You even get to search for content within the Editor panel, use ",(0,i.kt)("inlineCode",{parentName:"p"},"CTRL+F")," to launch the search function and enter a keyword. To replace a term, select the plus icon and enter a word after Replace with."),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/editor.jpeg",alt:"SQL Editor with search function",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"SQL Editor with search function"))),(0,i.kt)("h2",{id:"query-manager-tab"},"Query manager tab"),(0,i.kt)("p",null,"Right under the SQL editor there are several option which user can explore to have a profound experience with SQL editor:"),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/manage-query.jpeg",alt:"manage your SQL query",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"manage your SQL query"))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Run: Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Run")," to execute the query. This action will display the query results in the data section below."),(0,i.kt)("li",{parentName:"ol"},"Limit: Set the maximum number of rows you want to retrieve or display at a time."),(0,i.kt)("li",{parentName:"ol"},"Timer: This feature displays the time taken for the query to execute, providing insight into performance."),(0,i.kt)("li",{parentName:"ol"},"Save: Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Save")," to store the query. You'll be prompted to provide a name and description. You can also save the query as a dataset from this menu."),(0,i.kt)("li",{parentName:"ol"},"Copy Link: Copy the link to the query, provided it has been saved already, for easy sharing or later use."),(0,i.kt)("li",{parentName:"ol"},"Further Options:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Parameters: This allows you to assign a set of parameters as JSON, and they become available in your SQL by using Jinja Templating syntax."),(0,i.kt)("li",{parentName:"ul"},"Auto-completion: Toggle this feature to enable or disable SQL code auto-completion."),(0,i.kt)("li",{parentName:"ul"},"Format SQL: Automatically format your SQL code for better readability."),(0,i.kt)("li",{parentName:"ul"},"Keyboard Shortcuts: Access and utilize various keyboard shortcuts for more efficient SQL editing.")))),(0,i.kt)("h2",{id:"sql-editor-tabs"},"SQL Editor Tabs"),(0,i.kt)("h3",{id:"results-tab"},"Results tab"),(0,i.kt)("p",null,"View the results of your queries here. There are multiple tools provided in this tab."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Create Chart: Once the query is ready and saved, user can directly switch to building a chart using the query, by clicking ",(0,i.kt)("inlineCode",{parentName:"li"},"Create Chart"),"."),(0,i.kt)("li",{parentName:"ul"},"Download to CSV: The SQL queries can be used to create datasets and this can be obtained in system by downloading to CSV format."),(0,i.kt)("li",{parentName:"ul"},"Copy to Clipboard: Copy data to your system's clipboard.")),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/result-tab.jpeg",alt:"Different tools in Results Tab",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"Different tools in Results Tab"))),(0,i.kt)("h4",{id:"considerations-when-executing-queries"},"Considerations When Executing Queries"),(0,i.kt)("p",null,"When using the SQL Editor, consider the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Displaying Results: Only the result of the last executed query will be shown, even if multiple queries are present in the SQL Editor.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Query Timeout: Queries might time out if they do not return data within the set waiting period (default is 6 hours) or if the web server request times out.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Row Limitations: The number of rows retrieved from the database is capped for several reasons:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Efficiency: Retrieving excessive data is unnecessary and inefficient."),(0,i.kt)("li",{parentName:"ul"},"Avoiding Long Execution Times: Row limits help prevent queries from running for extended periods."),(0,i.kt)("li",{parentName:"ul"},"Preventing Database Overload: Limits help avoid running ",(0,i.kt)("inlineCode",{parentName:"li"},"SELECT * FROM")," on large tables, which could overwhelm the database.")))),(0,i.kt)("h4",{id:"handling-query-failures"},"Handling Query Failures"),(0,i.kt)("p",null,"Query errors may arise due to inconsistencies between your query and the database structure. Common issues include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Invalid References: A query can fail if it references a column or table that no longer exists in the database. You can either update the query to reference existing elements or remove the outdated references.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Incomplete Query: A query will not execute if required parameters are missing. Ensure all parameters used in the query are correctly defined in a valid JSON document."))),(0,i.kt)("h3",{id:"query-history-tab"},"Query History Tab"),(0,i.kt)("p",null,"The Query History tab, as the name suggests, displays a record of all previously executed queries. It provides essential details like whether the query was successful or failed, the start time, duration, and progress status (if the query is still running), among other relevant information."),(0,i.kt)("figure",null,(0,i.kt)(r.Z,{src:"/img/dhq-dashboard/working-with-data/sql-labs/history.jpeg",alt:"View the history of the SQL query",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"View the history of the SQL query"))),(0,i.kt)("p",null,"Of particular note is the Actions column, which enables you to do the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Edit (pencil icon): Overwrite text in the editor with a query on the selected table."),(0,i.kt)("li",{parentName:"ul"},"New Tab (plus icon): Runs the query in a new tab."),(0,i.kt)("li",{parentName:"ul"},"Trash Bin: Removes the query from the history log.")))}b.isMDXComponent=!0}}]);