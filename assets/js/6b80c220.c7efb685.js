"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[76879],{33320:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});a(67294);var n=a(3905);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={sidebar_position:4},u="Manipulating data",o={unversionedId:"reference/dronahq-query-language/manipulating-data",id:"reference/dronahq-query-language/manipulating-data",title:"Manipulating data",description:"You can use the DronaHQ Query Language (DQL) to perform math functions, manipulate strings and arrays, and interact with the data in your responses in several ways. Sample data and DQL examples are below.",source:"@site/docs/reference/dronahq-query-language/manipulating-data.md",sourceDirName:"reference/dronahq-query-language",slug:"/reference/dronahq-query-language/manipulating-data",permalink:"/reference/dronahq-query-language/manipulating-data",draft:!1,tags:[],version:"current",lastUpdatedAt:1706882289,formattedLastUpdatedAt:"Feb 2, 2024",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docSidebar",previous:{title:"Returning structured data",permalink:"/reference/dronahq-query-language/returning-structured-data"},next:{title:"DQL function reference",permalink:"/reference/dronahq-query-language/dql-function-reference"}},d={},c=[{value:"Contents",id:"contents",level:2},{value:"Working with strings",id:"working-with-strings",level:2},{value:"Working with numbers",id:"working-with-numbers",level:2},{value:"Working with URLs",id:"working-with-urls",level:2},{value:"Working with date and time",id:"working-with-date-and-time",level:2},{value:"Working with logic and arrays",id:"working-with-logic-and-arrays",level:2},{value:"Working with objects",id:"working-with-objects",level:2},{value:"Example JSON",id:"example-json",level:2},{value:"Insert strings then group and sum results by description",id:"insert-strings-then-group-and-sum-results-by-description",level:2},{value:"DQL",id:"dql",level:5},{value:"Result",id:"result",level:5},{value:"Return the length of a string",id:"return-the-length-of-a-string",level:2},{value:"DQL",id:"dql-1",level:5},{value:"Result",id:"result-1",level:5},{value:"Return part of a string",id:"return-part-of-a-string",level:2},{value:"DQL",id:"dql-2",level:5},{value:"Result",id:"result-2",level:5},{value:"Get the string before the first occurrence of a pattern",id:"get-the-string-before-the-first-occurrence-of-a-pattern",level:2},{value:"DQL",id:"dql-3",level:5},{value:"Result",id:"result-3",level:5},{value:"Get the string after the first occurrence of a pattern",id:"get-the-string-after-the-first-occurrence-of-a-pattern",level:2},{value:"DQL",id:"dql-4",level:5},{value:"Result",id:"result-4",level:5},{value:"Transform a string to all uppercase",id:"transform-a-string-to-all-uppercase",level:2},{value:"DQL",id:"dql-5",level:5},{value:"Result",id:"result-5",level:5},{value:"Transform a string to all lowercase",id:"transform-a-string-to-all-lowercase",level:2},{value:"DQL",id:"dql-6",level:5},{value:"Result",id:"result-6",level:5},{value:"Trim a string",id:"trim-a-string",level:2},{value:"DQL",id:"dql-7",level:5},{value:"Result",id:"result-7",level:5},{value:"Pad a string",id:"pad-a-string",level:2},{value:"DQL",id:"dql-8",level:5},{value:"Result",id:"result-8",level:5},{value:"Split a string into an array of components",id:"split-a-string-into-an-array-of-components",level:2},{value:"DQL",id:"dql-9",level:5},{value:"Result",id:"result-9",level:5},{value:"Join an array of strings into a single string",id:"join-an-array-of-strings-into-a-single-string",level:2},{value:"DQL",id:"dql-10",level:5},{value:"Result",id:"result-10",level:5},{value:"Replace one string with another string",id:"replace-one-string-with-another-string",level:2},{value:"DQL",id:"dql-11",level:5},{value:"Result",id:"result-11",level:5},{value:"Base64 encode a string",id:"base64-encode-a-string",level:2},{value:"DQL",id:"dql-12",level:5},{value:"Result",id:"result-12",level:5},{value:"Base64 decode a string",id:"base64-decode-a-string",level:2},{value:"DQL",id:"dql-13",level:5},{value:"Result",id:"result-13",level:5},{value:"Convert a string into JSON",id:"convert-a-string-into-json",level:2},{value:"DQL",id:"dql-14",level:5},{value:"Result",id:"result-14",level:5},{value:"Convert a string into a number",id:"convert-a-string-into-a-number",level:2},{value:"DQL",id:"dql-15",level:5},{value:"Result",id:"result-15",level:5},{value:"Sum numerical values",id:"sum-numerical-values",level:2},{value:"DQL",id:"dql-16",level:5},{value:"Result",id:"result-16",level:5},{value:"Get the absolute difference between two numbers",id:"get-the-absolute-difference-between-two-numbers",level:2},{value:"DQL",id:"dql-17",level:5},{value:"Result",id:"result-17",level:5},{value:"Round up a number",id:"round-up-a-number",level:2},{value:"DQL",id:"dql-18",level:5},{value:"Result",id:"result-18",level:5},{value:"Round down a number",id:"round-down-a-number",level:2},{value:"DQL",id:"dql-19",level:5},{value:"Result",id:"result-19",level:5},{value:"Raise a number to a power",id:"raise-a-number-to-a-power",level:2},{value:"DQL",id:"dql-20",level:5},{value:"Result",id:"result-20",level:5},{value:"Get the square root of a number",id:"get-the-square-root-of-a-number",level:2},{value:"DQL",id:"dql-21",level:5},{value:"Result",id:"result-21",level:5},{value:"Convert a number to hex or binary",id:"convert-a-number-to-hex-or-binary",level:2},{value:"DQL",id:"dql-22",level:5},{value:"Result",id:"result-22",level:5},{value:"Generate a new random invoice number",id:"generate-a-new-random-invoice-number",level:2},{value:"DQL",id:"dql-23",level:5},{value:"Result",id:"result-23",level:5},{value:"Convert a number into a string",id:"convert-a-number-into-a-string",level:2},{value:"DQL",id:"dql-24",level:5},{value:"Result",id:"result-24",level:5},{value:"Encode a URL component",id:"encode-a-url-component",level:2},{value:"DQL",id:"dql-25",level:5},{value:"Result",id:"result-25",level:5},{value:"Decode a URL component",id:"decode-a-url-component",level:2},{value:"DQL",id:"dql-26",level:5},{value:"Result",id:"result-26",level:5},{value:"Encode an entire URL",id:"encode-an-entire-url",level:2},{value:"DQL",id:"dql-27",level:5},{value:"Result",id:"result-27",level:5},{value:"Decode an entire URL",id:"decode-an-entire-url",level:2},{value:"DQL",id:"dql-28",level:5},{value:"Result",id:"result-28",level:5},{value:"Get the current time in ISO 8601 format",id:"get-the-current-time-in-iso-8601-format",level:2},{value:"DQL",id:"dql-29",level:5},{value:"Result",id:"result-29",level:5},{value:"Get the current time in Unix milliseconds since the epoch",id:"get-the-current-time-in-unix-milliseconds-since-the-epoch",level:2},{value:"DQL",id:"dql-30",level:5},{value:"Result",id:"result-30",level:5},{value:"Convert from a specific date format into Unix epoch time",id:"convert-from-a-specific-date-format-into-unix-epoch-time",level:2},{value:"DQL",id:"dql-31",level:5},{value:"Result",id:"result-31",level:5},{value:"Convert from Unix epoch time into a specific date format",id:"convert-from-unix-epoch-time-into-a-specific-date-format",level:2},{value:"DQL",id:"dql-32",level:5},{value:"Result",id:"result-32",level:5},{value:"Get the day/month/year from a date",id:"get-the-daymonthyear-from-a-date",level:2},{value:"DQL",id:"dql-33",level:5},{value:"Result",id:"result-33",level:5},{value:"Get the time from a date",id:"get-the-time-from-a-date",level:2},{value:"DQL",id:"dql-34",level:5},{value:"Result",id:"result-34",level:5},{value:"Get the day of the week from a date",id:"get-the-day-of-the-week-from-a-date",level:2},{value:"DQL",id:"dql-35",level:5},{value:"Result",id:"result-35",level:5},{value:"Compare two dates",id:"compare-two-dates",level:2},{value:"DQL",id:"dql-36",level:5},{value:"Result",id:"result-36",level:5},{value:"Increase a date by one day",id:"increase-a-date-by-one-day",level:2},{value:"DQL",id:"dql-37",level:5},{value:"Result",id:"result-37",level:5},{value:"Get the difference between two dates",id:"get-the-difference-between-two-dates",level:2},{value:"DQL",id:"dql-38",level:5},{value:"Result",id:"result-38",level:5},{value:"Time and date formatting",id:"time-and-date-formatting",level:2},{value:"Append to an array",id:"append-to-an-array",level:2},{value:"DQL",id:"dql-39",level:5},{value:"Result",id:"result-39",level:5},{value:"If-then-else",id:"if-then-else",level:2},{value:"DQL",id:"dql-40",level:5},{value:"Result",id:"result-40",level:5},{value:"Partition an array",id:"partition-an-array",level:2},{value:"DQL",id:"dql-41",level:5},{value:"Result",id:"result-41",level:5},{value:"Perform an action on each value in an array",id:"perform-an-action-on-each-value-in-an-array",level:2},{value:"DQL",id:"dql-42",level:5},{value:"Result",id:"result-42",level:5},{value:"Filter for values",id:"filter-for-values",level:2},{value:"DQL",id:"dql-43",level:5},{value:"Result",id:"result-43",level:5},{value:"Collapse an array to a single value",id:"collapse-an-array-to-a-single-value",level:2},{value:"DQL",id:"dql-44",level:5},{value:"Result",id:"result-44",level:5},{value:"Sort an array",id:"sort-an-array",level:2},{value:"DQL",id:"dql-45",level:5},{value:"Result",id:"result-45",level:5},{value:"Perform an action on each value in an object",id:"perform-an-action-on-each-value-in-an-object",level:2},{value:"DQL",id:"dql-46",level:5},{value:"Result",id:"result-46",level:5}],p={toc:c},m="wrapper";function h(e){var{components:t}=e,a=i(e,["components"]);return(0,n.kt)(m,l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){r(e,t,a[t])}))}return e}({},p,a),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"manipulating-data"},"Manipulating data"),(0,n.kt)("p",null,"You can use the DronaHQ Query Language (DQL) to perform math functions, manipulate strings and arrays, and interact with the data in your responses in several ways. Sample data and DQL examples are below."),(0,n.kt)("h2",{id:"contents"},"Contents"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#example-json"},"Example JSON"))),(0,n.kt)("h2",{id:"working-with-strings"},"Working with strings"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#insert-strings-then-group-and-sum-results-by-description"},"Insert strings then group and sum results by description")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#return-the-length-of-a-string"},"Return the length of a string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#return-part-of-a-string"},"Return part of a string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-string-before-the-first-occurrence-of-a-pattern"},"Get the string before the first occurrence of a pattern")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-string-after-the-first-occurrence-of-a-pattern"},"Get the string after the first occurrence of a pattern")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#transform-a-string-to-all-uppercase"},"Transform a string to all uppercase")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#transform-a-string-to-all-lowercase"},"Transform a string to all lowercase")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#trim-a-string"},"Trim a string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#pad-a-string"},"Pad a string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#split-a-string-into-an-array-of-components"},"Split a string into an array of components")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#join-an-array-of-strings-into-a-single-string"},"Join an array of strings into a single string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#replace-one-string-with-another-string"},"Replace one string with another string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#base64-encode-a-string"},"Base64 encode a string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#base64-decode-a-string"},"Base64 decode a string")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#convert-a-string-into-json"},"Convert a string into JSON")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#convert-a-string-into-a-number"},"Convert a string into number"))),(0,n.kt)("h2",{id:"working-with-numbers"},"Working with numbers"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#sum-numerical-values"},"Sum numerical values")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-absolute-difference-between-two-numbers"},"Get the absolute difference between two numbers")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#round-up-a-number"},"Round up a number")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#round-down-a-number"},"Round down a number")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#raise-a-number-to-a-power"},"Raise a number to a power")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-square-root-of-a-number"},"Get the square root of a number")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#convert-a-number-to-hex-or-binary"},"Convert a number to hex or binary")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#generate-a-new-random-invoice-number"},"Generate a new random invoice number")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#convert-a-number-into-a-string"},"Convert a number into a string"))),(0,n.kt)("h2",{id:"working-with-urls"},"Working with URLs"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#encode-a-url-component"},"Encode a URL component")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#decode-a-url-component"},"Decode a URL component")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#encode-an-entire-url"},"Encode an entire URL")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#decode-an-entire-url"},"Decode an entire URL"))),(0,n.kt)("h2",{id:"working-with-date-and-time"},"Working with date and time"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-current-time-in-iso-8601-format"},"Get the current time in ISO 8601 format")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-current-time-in-unix-milliseconds-since-the-epoch"},"Get the current time in Unix milliseconds since the epoch")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#convert-from-a-specific-date-format-into-unix-epoch-time"},"Convert from a specific date format into Unix epoch time")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#convert-from-unix-epoch-time-into-a-specific-date-format"},"Convert from Unix epoch time into a specific date format")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-daymonthyear-from-a-date"},"Get the day/month/year from a date")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-time-from-a-date"},"Get the time from a date")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-day-of-the-week-from-a-date"},"Get the day of the week from a date")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#compare-two-dates"},"Compare two dates")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#increase-a-date-by-one-day"},"Increase a date by one day")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#get-the-difference-between-two-dates"},"Get the difference between two dates")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#time-and-date-formatting"},"Time and Date formatting"))),(0,n.kt)("h2",{id:"working-with-logic-and-arrays"},"Working with logic and arrays"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#append-to-an-array"},"Append to an array")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#if-then-else"},"If-then-else")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#partition-an-array"},"Partition an array")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#perform-an-action-on-each-value-in-an-array"},"Perform an action on each value in an array")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#filter-for-values"},"Filter for values")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#collapse-an-array-to-a-single-value"},"Collapse an array to a single value")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#sort-an-array"},"Sort an array"))),(0,n.kt)("h2",{id:"working-with-objects"},"Working with objects"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#perform-an-action-on-each-value-in-an-object"},"Perform an action on each value in an object"))),(0,n.kt)("h2",{id:"example-json"},"Example JSON"),(0,n.kt)("p",null,"The examples below use this JSON data:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'    {\n        "customer_info": {\n            "customer field": "Customer data",\n            "unformatted_customer_field": " customer \\n stuff ",\n            "total_value": "281.01",\n            "associated_usernames": ["user1", "myuser", "online_user"]\n        },\n        "payments": [\n            {\n                "invoice_number": "101301",\n                "date": "2022-09-11T16:12:34.494Z",\n                "description": "recurring subscription",\n                "amount": 110.48\n            },\n            {\n                "invoice_number": "101302",\n                "date": "2022-09-29T14:45:13.148Z",\n                "description": "one time purchase",\n                "amount": 24.49\n            },\n            {\n                "invoice_number": "101303",\n                "date": "2022-10-11T16:12:34.683Z",\n                "description": "recurring subscription",\n                "amount": 110.48\n            },\n            {\n                "invoice_number": "101304",\n                "date": "2022-10-12T11:45:22.182Z",\n                "description": "recurring subscription deluxe",\n                "amount": 35.56\n            }\n        ]\n    }\n')),(0,n.kt)("h2",{id:"insert-strings-then-group-and-sum-results-by-description"},"Insert strings then group and sum results by description"),(0,n.kt)("p",null,"The example below gets every description value in the payments array and appends the string annual cost. It then gets the amount value below each description field, multiplies it by 12, and appends it to its corresponding result. The results are grouped by description field."),(0,n.kt)("h5",{id:"dql"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-string"},'payments.{"description" & " annual cost" : "amount*12"}\n')),(0,n.kt)("h5",{id:"result"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'[\n    {"recurring subscription annual cost": 1325.76},\n    {"one time purchase annual cost": 293.88},\n    {"recurring subscription annual cost": 1325.76},\n    {"recurring subscription deluxe annual cost": 426.72}\n]\n')),(0,n.kt)("h2",{id:"return-the-length-of-a-string"},"Return the length of a string"),(0,n.kt)("p",null,"The $length() function returns the length of the specified string. The example below returns the length of the string in the first description key-value pair in the payments array."),(0,n.kt)("h5",{id:"dql-1"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$length(payments[0].description)\n")),(0,n.kt)("h5",{id:"result-1"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"22\n")),(0,n.kt)("h2",{id:"return-part-of-a-string"},"Return part of a string"),(0,n.kt)("p",null,"The $substring() function returns part of a specified string. In the example below, The 3 is optional and specifies the offset, and the 6 is the number of characters you are selecting. Negative numbers can also be used for the offset."),(0,n.kt)("h5",{id:"dql-2"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$substring(payments[0].description, 3, 6)\n")),(0,n.kt)("h5",{id:"result-2"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"urring"\n')),(0,n.kt)("h2",{id:"get-the-string-before-the-first-occurrence-of-a-pattern"},"Get the string before the first occurrence of a pattern"),(0,n.kt)("p",null,"In the example below, the $substringBefore() function returns the substring before the specified occurrence of subscription . If it doesn't find subscription, it returns the entire string."),(0,n.kt)("h5",{id:"dql-3"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$substringBefore(payments[0].description, "subscription")\n')),(0,n.kt)("h5",{id:"result-3"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"recurring "\n')),(0,n.kt)("h2",{id:"get-the-string-after-the-first-occurrence-of-a-pattern"},"Get the string after the first occurrence of a pattern"),(0,n.kt)("p",null,"The $substringAfter() function finds a pattern and returns the substring immediately following the pattern. The example below returns the substring that follows recurring in the description key-value pair in the first object of the payments array."),(0,n.kt)("h5",{id:"dql-4"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$substringAfter(payments[0].description, "recurring")\n')),(0,n.kt)("h5",{id:"result-4"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'" subscription"\n')),(0,n.kt)("h2",{id:"transform-a-string-to-all-uppercase"},"Transform a string to all uppercase"),(0,n.kt)("p",null,"The $uppercase() function makes all the characters in a string uppercase."),(0,n.kt)("h5",{id:"dql-5"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$uppercase(payments[0].description)\n")),(0,n.kt)("h5",{id:"result-5"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"RECURRING SUBSCRIPTION"\n')),(0,n.kt)("h2",{id:"transform-a-string-to-all-lowercase"},"Transform a string to all lowercase"),(0,n.kt)("p",null,"The $lowercase() function makes all the characters in a string lowercase."),(0,n.kt)("h5",{id:"dql-6"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$lowercase(customer_info."customer field")\n')),(0,n.kt)("h5",{id:"result-6"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"customer data"\n')),(0,n.kt)("h2",{id:"trim-a-string"},"Trim a string"),(0,n.kt)("p",null,"The $trim() function removes excess leading and trailing spaces, converts newline, carriage return, line feed, and tab characters into a single space character, and reduces consecutive spaces into a single space character."),(0,n.kt)("h5",{id:"dql-7"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$trim(customer_info.unformatted_customer_field)\n")),(0,n.kt)("h5",{id:"result-7"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"customer stuff"\n')),(0,n.kt)("h2",{id:"pad-a-string"},"Pad a string"),(0,n.kt)("p",null,"The $pad() function adds spaces or characters to a string so that the total length of the string equals the second parameter. If the second parameter is a positive number, it pads the end of the string with the third parameter. If the second parameter is negative, it pads the front of the string with the third parameter. (Third parameter characters default to spaces if left blank.)"),(0,n.kt)("h5",{id:"dql-8"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$pad(customer_info."customer field", 15, "#")\n')),(0,n.kt)("h5",{id:"result-8"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"Customer data##"\n')),(0,n.kt)("h2",{id:"split-a-string-into-an-array-of-components"},"Split a string into an array of components"),(0,n.kt)("p",null,"The $split() function returns the string split on the separator specified in the second parameter and optionally limited by the third parameter. You can also use a regex instead of a string."),(0,n.kt)("h5",{id:"dql-9"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$split(payments[1].description, " ", 2)\n')),(0,n.kt)("h5",{id:"result-9"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'["one","time"]\n')),(0,n.kt)("h2",{id:"join-an-array-of-strings-into-a-single-string"},"Join an array of strings into a single string"),(0,n.kt)("p",null,"The $join() function creates a single string from an array of strings. The example below gets the array from the associated_usernames key and returns the array's values as a single string."),(0,n.kt)("h5",{id:"dql-10"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$join(customer_info.associated_usernames)\n")),(0,n.kt)("h5",{id:"result-10"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"user1myuseronline_user"\n')),(0,n.kt)("h2",{id:"replace-one-string-with-another-string"},"Replace one string with another string"),(0,n.kt)("p",null,"In the example below, the $replace() function finds the instances of recurring in the first parameter string and replaces them with renewing, limited to the first instance found (optionally specified with the 1). You could also use a regex instead of recurring."),(0,n.kt)("h5",{id:"dql-11"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$replace(payments[0].description,"recurring", "renewing", 1)\n')),(0,n.kt)("h5",{id:"result-11"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"renewing subscription"\n')),(0,n.kt)("h2",{id:"base64-encode-a-string"},"Base64 encode a string"),(0,n.kt)("p",null,'The $base64encode() function converts a string to base64 encoding. The example below converts the string "some data here" into "c29tZSBkYXRhIGhlcmU=".'),(0,n.kt)("h5",{id:"dql-12"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$base64encode("some data here")\n')),(0,n.kt)("h5",{id:"result-12"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"c29tZSBkYXRhIGhlcmU="\n')),(0,n.kt)("h2",{id:"base64-decode-a-string"},"Base64 decode a string"),(0,n.kt)("p",null,'The $base64decode function converts a base64-encoded string into a human-readable string. The example below converts "c29tZSBkYXRhIGhlcmU=" into "some data here".'),(0,n.kt)("h5",{id:"dql-13"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$base64decode("c29tZSBkYXRhIGhlcmU=")\n')),(0,n.kt)("h5",{id:"result-13"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"some data here"\n')),(0,n.kt)("h2",{id:"convert-a-string-into-json"},"Convert a string into JSON"),(0,n.kt)("p",null,'The $jsonParse() function enables the string to be formatted into JSON so it can be queried with DQL. The example below assumes you have the string {"Feedback Type":"Bug Report"} stored as a variable named input.'),(0,n.kt)("h5",{id:"dql-14"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$jsonParse(input)\n")),(0,n.kt)("h5",{id:"result-14"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'{"Feedback Type":"Bug Report"}\n')),(0,n.kt)("h2",{id:"convert-a-string-into-a-number"},"Convert a string into a number"),(0,n.kt)("p",null,'You can convert a string into a number with the $number() function. The example below converts the string "281.01" in the customer_info object into the number 281.01.'),(0,n.kt)("h5",{id:"dql-15"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$number(customer_info.total_value)\n")),(0,n.kt)("h5",{id:"result-15"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"281.01\n")),(0,n.kt)("h2",{id:"sum-numerical-values"},"Sum numerical values"),(0,n.kt)("p",null,"The $sum() function gets values from every instance of a key-value pair in an object or array, adds the values together, and returns the result. The example below gets every amount field's value in the payments array and returns their sum."),(0,n.kt)("h5",{id:"dql-16"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$sum(payments.amount)\n")),(0,n.kt)("h5",{id:"result-16"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"$281.01"\n')),(0,n.kt)("h2",{id:"get-the-absolute-difference-between-two-numbers"},"Get the absolute difference between two numbers"),(0,n.kt)("p",null,"The $abs() function returns the absolute difference between two numbers. Absolute difference is the distance between two values on a number line. Absolute difference is always positive."),(0,n.kt)("h5",{id:"dql-17"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$abs(4.56 - 6.78)\n")),(0,n.kt)("h5",{id:"result-17"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"2.22\n")),(0,n.kt)("h2",{id:"round-up-a-number"},"Round up a number"),(0,n.kt)("p",null,"The $ceil() function rounds a number up to the next whole number."),(0,n.kt)("h5",{id:"dql-18"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"ceil(3.45)\n")),(0,n.kt)("h5",{id:"result-18"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"4\n")),(0,n.kt)("h2",{id:"round-down-a-number"},"Round down a number"),(0,n.kt)("p",null,"The floor() function rounds a number down to the previous whole number."),(0,n.kt)("h5",{id:"dql-19"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$floor(3.99)\n")),(0,n.kt)("h5",{id:"result-19"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"3\n")),(0,n.kt)("h2",{id:"raise-a-number-to-a-power"},"Raise a number to a power"),(0,n.kt)("p",null,"The $power() function raises the first number to the power of the second number. The example below raises 2 (the base) to the power of 3 (the exponent)."),(0,n.kt)("h5",{id:"dql-20"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$power(2,3)\n")),(0,n.kt)("h5",{id:"result-20"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"8\n")),(0,n.kt)("h2",{id:"get-the-square-root-of-a-number"},"Get the square root of a number"),(0,n.kt)("p",null,"The $sqrt() function returns the square root of a number."),(0,n.kt)("h5",{id:"dql-21"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$sqrt(9)\n")),(0,n.kt)("h5",{id:"result-21"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"3\n")),(0,n.kt)("h2",{id:"convert-a-number-to-hex-or-binary"},"Convert a number to hex or binary"),(0,n.kt)("p",null,"The formatBase() function converts a number to hex or binary. The example below converts 3000 to hex. Using base 2 instead of 16 would convert 3000 to binary."),(0,n.kt)("h5",{id:"dql-22"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$formatBase(3000, 16)\n")),(0,n.kt)("h5",{id:"result-22"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"bb8"\n')),(0,n.kt)("h2",{id:"generate-a-new-random-invoice-number"},"Generate a new random invoice number"),(0,n.kt)("p",null,'The $round($random()) function generates a random whole number. The example below generates a random whole number between 1 and 1000 and returns the number appended to the string "Invoice number ".'),(0,n.kt)("h5",{id:"dql-23"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"Invoice number " & $round($random()*1000)\n')),(0,n.kt)("h5",{id:"result-23"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"Invoice number 891"\n')),(0,n.kt)("h2",{id:"convert-a-number-into-a-string"},"Convert a number into a string"),(0,n.kt)("p",null,'You can convert a number into a string with the $string() function. The example below gets the number value from the amount key in the first object in the payments array and converts it into the string "110.48".'),(0,n.kt)("h5",{id:"dql-24"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$string(payments[0].amount)\n")),(0,n.kt)("h5",{id:"result-24"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"110.48"\n')),(0,n.kt)("h2",{id:"encode-a-url-component"},"Encode a URL component"),(0,n.kt)("p",null,"The $encodeUrlComponent() function replaces certain characters in a URL component with their UTF-8 encoded versions. The example below replaces ? with %3F, and = with %3D."),(0,n.kt)("h5",{id:"dql-25"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$encodeUrlComponent("?city=melbourne")\n')),(0,n.kt)("h5",{id:"result-25"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"%3Fcity%3Dmelbourne"\n')),(0,n.kt)("h2",{id:"decode-a-url-component"},"Decode a URL component"),(0,n.kt)("p",null,"The $decodeUrlComponent() function replaces UTF-8 encoded characters in a URL component with their original versions. The example below replaces %3F with ?, and $3D with =."),(0,n.kt)("h5",{id:"dql-26"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$decodeUrlComponent("%3Fcity%3Dmelbourne")\n')),(0,n.kt)("h5",{id:"result-26"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"?city=melbourne"\n')),(0,n.kt)("h2",{id:"encode-an-entire-url"},"Encode an entire URL"),(0,n.kt)("p",null,"The $encodeUrl() function replaces certain characters in a URL with UTF-8 encoded characters. The example below replaces \u3053\u3093\u306b\u3061\u306f with %E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF"),(0,n.kt)("h5",{id:"dql-27"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$encodeUrl("https://faketranslatewebsite.com/?phrase=\u3053\u3093\u306b\u3061\u306f")\n')),(0,n.kt)("h5",{id:"result-27"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"https://faketranslatewebsite.com/?phrase=%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF"\n')),(0,n.kt)("h2",{id:"decode-an-entire-url"},"Decode an entire URL"),(0,n.kt)("p",null,"The $decodeUrl() function replaces UTF-8 encoded characters in a URL with their original versions. The example below replaces %E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF with \u3053\u3093\u306b\u3061\u306f."),(0,n.kt)("h5",{id:"dql-28"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$decodeUrl("https://faketranslatewebsite.com/?phrase=%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF")\n')),(0,n.kt)("h5",{id:"result-28"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"https://faketranslatewebsite.com/?phrase=\u3053\u3093\u306b\u3061\u306f"\n')),(0,n.kt)("h2",{id:"get-the-current-time-in-iso-8601-format"},"Get the current time in ISO 8601 format"),(0,n.kt)("p",null,"The $now() function returns the current time in ISO 8601 format."),(0,n.kt)("h5",{id:"dql-29"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$now()\n")),(0,n.kt)("h5",{id:"result-29"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"2022-11-04T22:36:57.094Z"\n')),(0,n.kt)("h2",{id:"get-the-current-time-in-unix-milliseconds-since-the-epoch"},"Get the current time in Unix milliseconds since the epoch"),(0,n.kt)("p",null,"The millis() function returns the current time in Unix milliseconds since the epoch."),(0,n.kt)("h5",{id:"dql-30"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$millis()\n")),(0,n.kt)("h5",{id:"result-30"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"1667601477254\n")),(0,n.kt)("h2",{id:"convert-from-a-specific-date-format-into-unix-epoch-time"},"Convert from a specific date format into Unix epoch time"),(0,n.kt)("p",null,"The $toMillis() function converts a given date format into Unix epoch time. See the formatting section below for details on date formatting."),(0,n.kt)("h5",{id:"dql-31"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$toMillis("10/12/2018 11:39 PM", "[M]/[D]/[Y] [h]:[m] [P]")\n')),(0,n.kt)("h5",{id:"result-31"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"1539387540000<\n")),(0,n.kt)("h2",{id:"convert-from-unix-epoch-time-into-a-specific-date-format"},"Convert from Unix epoch time into a specific date format"),(0,n.kt)("p",null,"The $fromMillis() function converts Unix epoch time into a different date format. See the formatting section below for details on date formatting."),(0,n.kt)("h5",{id:"dql-32"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$fromMillis(1539387540000, "[Y]-[M]-[D] [H]:[m]:[s] [z]")\n')),(0,n.kt)("h5",{id:"result-32"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"2018-10-12 23:39:00 GMT+00:00"\n')),(0,n.kt)("h2",{id:"get-the-daymonthyear-from-a-date"},"Get the day/month/year from a date"),(0,n.kt)("p",null,"The $year(), $month(), and $day() functions return their respective components from a year-month-day date format."),(0,n.kt)("h5",{id:"dql-33"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$year("2023-02-11") & "-" & $month("2023-02-11") & "-" & $day("2023-02-11")\n')),(0,n.kt)("h5",{id:"result-33"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"2023-2-11"\n')),(0,n.kt)("h2",{id:"get-the-time-from-a-date"},"Get the time from a date"),(0,n.kt)("p",null,"The $hours(), $minutes(), $seconds(), and $milliseconds() functions return their respective values from a given date. The example below uses the $now() function for the date."),(0,n.kt)("h5",{id:"dql-34"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$hours($now()) & ":" & $minutes($now()) & ":" & $seconds($now()) & ":" & $milliSeconds($now())\n')),(0,n.kt)("h5",{id:"result-34"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"19:23:8:143"\n')),(0,n.kt)("h2",{id:"get-the-day-of-the-week-from-a-date"},"Get the day of the week from a date"),(0,n.kt)("p",null,"The $dayOfTheWeek() function accepts a date and returns a number corresponding to a day of the week. 0 is Sunday, 1 is Monday, and so on."),(0,n.kt)("h5",{id:"dql-35"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$dayOfTheWeek($now())\n")),(0,n.kt)("h5",{id:"result-35"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"2\n")),(0,n.kt)("h2",{id:"compare-two-dates"},"Compare two dates"),(0,n.kt)("p",null,"The $hasSameDate() function accepts two or more dates with parameters specifying values in the dates. The function compares the values specified by the parameters and returns true if they are identical, or false if they are not."),(0,n.kt)("h5",{id:"dql-36"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$hasSameDate("2023-02-01", "2023-02-08", ["month", "year"])\n')),(0,n.kt)("h5",{id:"result-36"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"true\n")),(0,n.kt)("h2",{id:"increase-a-date-by-one-day"},"Increase a date by one day"),(0,n.kt)("p",null,"The $datePlus() function accepts a date (formatted as YYYY-MM-DD or milliseconds since epoch), the number of units you want to add, and the date component you want to advance (years, months, days, hours, minutes, seconds, or milliseconds). The function returns the increased date as milliseconds since epoch."),(0,n.kt)("h5",{id:"dql-37"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$datePlus("2023-02-07", 1, "days")\n')),(0,n.kt)("h5",{id:"result-37"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"1675814400000\n")),(0,n.kt)("h2",{id:"get-the-difference-between-two-dates"},"Get the difference between two dates"),(0,n.kt)("p",null,"The $diffDate() function accepts two dates (formatted as YYYY-MM-DD or milliseconds since epoch) and a component of each date (years, months, days, hours, minutes, seconds, or milliseconds), then returns the difference between the two dates' component."),(0,n.kt)("h5",{id:"dql-38"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$diffDate("2023-02-08", "2023-01-22", "days")\n')),(0,n.kt)("h5",{id:"result-38"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"17\n")),(0,n.kt)("h2",{id:"time-and-date-formatting"},"Time and date formatting"),(0,n.kt)("table",null,(0,n.kt)("tr",null,(0,n.kt)("th",null,"Character"),(0,n.kt)("th",null,"Meaning")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"Y"),(0,n.kt)("td",null,"year")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"M"),(0,n.kt)("td",null,"month as a numerical value")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"D"),(0,n.kt)("td",null,"day in month")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"d"),(0,n.kt)("td",null,"day in year")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"F"),(0,n.kt)("td",null,"day of week")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"W"),(0,n.kt)("td",null,"week in year")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"w"),(0,n.kt)("td",null,"week in month")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"H"),(0,n.kt)("td",null,"hour (24 hours)")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"h"),(0,n.kt)("td",null,"hour (12 hours)")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"p"),(0,n.kt)("td",null,"am/pm marker")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"m"),(0,n.kt)("td",null,"minute")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"s"),(0,n.kt)("td",null,"second")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"f"),(0,n.kt)("td",null,"fractional seconds")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"Z"),(0,n.kt)("td",null,"timezone")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"z"),(0,n.kt)("td",null,"timezone but modified where to include a prefix as a time offset using GMT")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"C"),(0,n.kt)("td",null,"calendar: the name or abbreviation of a calendar name")),(0,n.kt)("tr",null,(0,n.kt)("td",null,"E"),(0,n.kt)("td",null,"era: the name of a baseline for the numbering of years, for example the reign of a monarch"))),(0,n.kt)("h2",{id:"append-to-an-array"},"Append to an array"),(0,n.kt)("p",null,"The $append() function can combine two arrays, an array and a single value, or two strings into an array."),(0,n.kt)("h5",{id:"dql-39"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$append([1,2,3], [4,5,6])\n")),(0,n.kt)("h5",{id:"result-39"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[1,2,3,4,5,6]\n")),(0,n.kt)("h2",{id:"if-then-else"},"If-then-else"),(0,n.kt)("p",null,'The $boolean value is a true/false test. The second value is the output for true and the final value is the output for false. The example below tests if the total_value field\'s value is greater than 250. Since the value is greater than 250, the function returns "high-value customer".'),(0,n.kt)("h5",{id:"dql-40"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$boolean(customer_info.total_value > 250) ? "high-value customer" : "not a high-value customer"\n')),(0,n.kt)("h5",{id:"result-40"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'"high-value customer"\n')),(0,n.kt)("h2",{id:"partition-an-array"},"Partition an array"),(0,n.kt)("p",null,"The $partition() function breaks an array up into smaller arrays and returns the smaller arrays as a list."),(0,n.kt)("h5",{id:"dql-41"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$partition(payments,2)\n")),(0,n.kt)("h5",{id:"result-41"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'[\n    [{"invoice_number": "101301","date": "2022-09-11T16:12:34.494Z","description": "recurring subscription","amount": 110.48},{"invoice_number": "101302","date": "2022-09-29T14:45:13.148Z","description": "one time purchase","amount": 24.49}],\n    [{"invoice_number": "101303","date": "2022-10-11T16:12:34.683Z","description": "recurring subscription","amount": 110.48},{"invoice_number": "101304","date": "2022-10-12T11:45:22.182Z","description": "recurring subscription deluxe","amount": 35.56}]\n]\n')),(0,n.kt)("h2",{id:"perform-an-action-on-each-value-in-an-array"},"Perform an action on each value in an array"),(0,n.kt)("p",null,"In this example, the $map() function gets the numerical values from the amount fields in the payments array and converts them to strings with the $string() function."),(0,n.kt)("h5",{id:"dql-42"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$map(input.payments[].amount,$string)\n")),(0,n.kt)("h5",{id:"result-42"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$map(input.payments[].amount,$string)\n")),(0,n.kt)("h2",{id:"filter-for-values"},"Filter for values"),(0,n.kt)("p",null,"In this example, the $filter() function returns values greater than 40 from amount fields in the payments array."),(0,n.kt)("h5",{id:"dql-43"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-string"},"$filter(input.payments[].amount,fn($v,$i,$a) { $v > 40})\n")),(0,n.kt)("h5",{id:"result-43"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[110.48, 110.48]\n")),(0,n.kt)("h2",{id:"collapse-an-array-to-a-single-value"},"Collapse an array to a single value"),(0,n.kt)("p",null,"The reduce() function applies a function to every element in the array. In this example, it adds all the elements of the array together."),(0,n.kt)("h5",{id:"dql-44"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$reduce(input.payments[].amount,fn($i, $j){$i + $j})\n")),(0,n.kt)("h5",{id:"result-44"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"281.01\n")),(0,n.kt)("h2",{id:"sort-an-array"},"Sort an array"),(0,n.kt)("p",null,"The $sort() function sorts an array by the function specified where $j is the current item and $i is the next item."),(0,n.kt)("h5",{id:"dql-45"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"$sort(input.payments[].amount,fn($i, $j){$i < $j})\n")),(0,n.kt)("h5",{id:"result-45"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[110.48, 110.48, 35.56, 24.49]\n")),(0,n.kt)("h2",{id:"perform-an-action-on-each-value-in-an-object"},"Perform an action on each value in an object"),(0,n.kt)("p",null,"In this example, the $each() function converts every string value in an object to uppercase."),(0,n.kt)("h5",{id:"dql-46"},"DQL"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'$each({"transaction_id": "inv_80394", "description": "buying 20 units of data"},$uppercase)\n')),(0,n.kt)("h5",{id:"result-46"},"Result"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'["INV_80394", "BUYING 20 UNITS OF DATA"]\n')))}h.isMDXComponent=!0}}]);