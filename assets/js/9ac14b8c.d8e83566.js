"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[49930],{12280:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>u,metadata:()=>p,toc:()=>c});a(67294);var n=a(3905),r=a(86291);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})),t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}const u={sidebar_position:1,title:"Custom JS"},l="Custom JS",p={unversionedId:"binding-data/data-queries/custom-js",id:"binding-data/data-queries/custom-js",title:"Custom JS",description:"DronaHQ gives a way to write custom Javascript on any data in the app to transform or generate data in the format that you need. You can make use of the JS libraries and JS objects here as well. The output of this JS will be seen in the transformed response section and will be the final output of the Data query for the rest of the app.",source:"@site/docs/binding-data/data-queries/custom-js.md",sourceDirName:"binding-data/data-queries",slug:"/binding-data/data-queries/custom-js",permalink:"/binding-data/data-queries/custom-js",draft:!1,tags:[],version:"current",lastUpdatedAt:1720087754,formattedLastUpdatedAt:"Jul 4, 2024",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Custom JS"},sidebar:"docSidebar",previous:{title:"Connector queries",permalink:"/binding-data/data-queries/connector-queries"},next:{title:"DronaHQ Query Language",permalink:"/binding-data/data-queries/dronahq-query-language"}},d={},c=[{value:"DronaHQ imported JS libraries",id:"dronahq-imported-js-libraries",level:2},{value:"Example usage",id:"example-usage",level:2},{value:"Tablegrid data",id:"tablegrid-data",level:3},{value:"JS code",id:"js-code",level:3},{value:"Output",id:"output",level:3}],m={toc:c},b="wrapper";function g(t){var{components:e}=t,a=s(t,["components"]);return(0,n.kt)(b,i(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){o(t,e,a[e])}))}return t}({},m,a),{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"custom-js"},"Custom JS"),(0,n.kt)("p",null,"DronaHQ gives a way to write custom Javascript on any data in the app to transform or generate data in the format that you need. You can make use of the ",(0,n.kt)("a",{parentName:"p",href:"/app-scripting-and-code/import-js-libraries"},"JS libraries")," and ",(0,n.kt)("a",{parentName:"p",href:"/app-scripting-and-code/import-js-libraries"},"JS objects")," here as well. The output of this JS will be seen in the transformed response section and will be the final output of the Data query for the rest of the app. "),(0,n.kt)("figure",null,(0,n.kt)(r.Z,{src:"/img/data-queries/custom-js.png",alt:"Custom JS",width:"100%",mdxType:"Thumbnail"}),(0,n.kt)("figcaption",{align:"center"},(0,n.kt)("i",null,"Custom JS"))),(0,n.kt)("h2",{id:"dronahq-imported-js-libraries"},"DronaHQ imported JS libraries"),(0,n.kt)("p",null,"The following JS libraries are auto imported by DronaHQ to be used in the JS code:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Libraries"),(0,n.kt)("th",{parentName:"tr",align:null},"Links"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"underscore"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://underscorejs.org/"},"https://underscorejs.org/"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"moment"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://momentjs.com/docs/"},"https://momentjs.com/docs/"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"papaparse"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://www.papaparse.com/docs"},"https://www.papaparse.com/docs"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"alasql"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://github.com/AlaSQL/alasql/wiki"},"https://github.com/AlaSQL/alasql/wiki"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"crypto"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://www.npmjs.com/package/crypto-js"},"https://www.npmjs.com/package/crypto-js"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"jquery"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://api.jquery.com/"},"https://api.jquery.com/"))))),(0,n.kt)("h2",{id:"example-usage"},"Example usage"),(0,n.kt)("p",null,"Imagine a scenario that you have a Tablegrid control with data already populated and you want to get all invoice numbers and populate them in a dropdown for users selection. Instead of doing a database or API call, you can create a custom JS type of a data query and take the Tablegrid data as input parameter to the JS code."),(0,n.kt)("h3",{id:"tablegrid-data"},"Tablegrid data"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n        "customer_info": {\n            "customer field": "Customer data",\n            "unformatted_customer_field": " customer \\n stuff ",\n            "total_value": "281.01",\n            "associated_usernames": ["user1", "myuser", "online_user"]\n        },\n        "payments": [\n            {\n                "invoice_number": "101301",\n                "date": "2022-09-11T16:12:34.494Z",\n                "description": "recurring subscription",\n                "amount": 110.48\n            },\n            {\n                "invoice_number": "101302",\n                "date": "2022-09-29T14:45:13.148Z",\n                "description": "one time purchase",\n                "amount": 24.49\n            },\n            {\n                "invoice_number": "101303",\n                "date": "2022-10-11T16:12:34.683Z",\n                "description": "recurring subscription",\n                "amount": 110.48\n            },\n            {\n                "invoice_number": "101304",\n                "date": "2022-10-12T11:45:22.182Z",\n                "description": "recurring subscription deluxe",\n                "amount": 35.56\n            }\n        ]\n    } \n')),(0,n.kt)("h3",{id:"js-code"},"JS code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"function JSCode( output, sample ) {\noutput = sample.payments.map(payment => payment.invoice_number);\nreturn output;\n}\n")),(0,n.kt)("h3",{id:"output"},"Output"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'[\n    "101301",\n    "101302",\n    "101303",\n    "101304"\n]\n')),(0,n.kt)("p",null,"This dataquery can be referenced in any control (e.g. dropdown) with the following to get the required array of string."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-javascript"},"{{custom_js_dataquery}}\n")),(0,n.kt)("figure",null,(0,n.kt)(r.Z,{src:"/img/data-queries/dropdown-invoice.png",alt:"Data from custom js",width:"100%",mdxType:"Thumbnail"}),(0,n.kt)("figcaption",{align:"center"},(0,n.kt)("i",null,"Data referencing the custom JS"))),(0,n.kt)("admonition",{title:"Please Note",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"DronaHQ automatically imports moment.js, underscore.js, crypto.js, papaparse.js, alasql.js and jquery.js by default beyond which you can import your own libraries or script tags or build reusable JS functions using JS objects.")))}g.isMDXComponent=!0}}]);