"use strict";(self.webpackChunkdronahq_docs=self.webpackChunkdronahq_docs||[]).push([[23678],{82531:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>u});n(67294);var i=n(3905),a=n(86291);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const s={sidebar_position:61,title:"Git Sync Global"},d=void 0,p={unversionedId:"git-sync-global",id:"git-sync-global",title:"Git Sync Global",description:"You can enable Git Sync globally to effectively manage version control for all your apps on DronaHQ by linking them to a Git hosting provider, like GitHub, GitLab, Bitbucket, and others in single Git repository. This integration simplifies the process of monitoring changes, facilitating rollbacks, and promoting collaborative work via git branches. Moreover, it allows for seamless connectivity to any app, whether it resides within the same account or another, enabling users to effortlessly transition between diverse environments.",source:"@site/docs/git-sync-global.md",sourceDirName:".",slug:"/git-sync-global",permalink:"/git-sync-global",draft:!1,tags:[],version:"current",lastUpdatedAt:1711813211,formattedLastUpdatedAt:"Mar 30, 2024",sidebarPosition:61,frontMatter:{sidebar_position:61,title:"Git Sync Global"},sidebar:"docSidebar",previous:{title:"DronaHQ Security",permalink:"/dronahq-security"},next:{title:"Git Sync (Deprecated)",permalink:"/git-sync"}},c={},u=[{value:"DronaHQ Git Sync Workflow",id:"dronahq-git-sync-workflow",level:2},{value:"Git Workflow",id:"git-workflow",level:3},{value:"Prerequisite",id:"prerequisite",level:2},{value:"Create SSH Key in each DronaHQ Instance",id:"create-ssh-key-in-each-dronahq-instance",level:3},{value:"Setting up Git Sync Environment Variables",id:"setting-up-git-sync-environment-variables",level:3},{value:"Setup Git repo",id:"setup-git-repo",level:3},{value:"Git Sync In Action",id:"git-sync-in-action",level:2},{value:"Add to Git",id:"add-to-git",level:3},{value:"Remove from Git",id:"remove-from-git",level:3},{value:"Push changes to Git",id:"push-changes-to-git",level:3},{value:"Pull changes from Git",id:"pull-changes-from-git",level:3},{value:"Sync Apps from Git Repo",id:"sync-apps-from-git-repo",level:3},{value:"APPS ADDED Section",id:"apps-added-section",level:4},{value:"APPS UPDATED Section",id:"apps-updated-section",level:4},{value:"APPS DELETED Section",id:"apps-deleted-section",level:4},{value:"Setting up on supported Git providers",id:"setting-up-on-supported-git-providers",level:2},{value:"Adding SSH Keys to Git Service Accounts",id:"adding-ssh-keys-to-git-service-accounts",level:3},{value:"Adding SSH Keys to a particular GitHub Repository",id:"adding-ssh-keys-to-a-particular-github-repository",level:3},{value:"Adding SSH Key in GitLab",id:"adding-ssh-key-in-gitlab",level:3},{value:"Adding SSH Key in Bitbucket",id:"adding-ssh-key-in-bitbucket",level:3}],h={toc:u},m="wrapper";function g(e){var{components:t}=e,n=r(e,["components"]);return(0,i.kt)(m,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){o(e,t,n[t])}))}return e}({},h,n),{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"You can enable Git Sync globally to effectively manage version control for all your apps on DronaHQ by linking them to a Git hosting provider, like GitHub, GitLab, Bitbucket, and others in single Git repository. This integration simplifies the process of monitoring changes, facilitating rollbacks, and promoting collaborative work via git branches. Moreover, it allows for seamless connectivity to any app, whether it resides within the same account or another, enabling users to effortlessly transition between diverse environments."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"For Git sync to work the user needs Git hosting service which supports SSH protocols and currently it is available on self-hosted and not available on the cloud.")),(0,i.kt)("h2",{id:"dronahq-git-sync-workflow"},"DronaHQ Git Sync Workflow"),(0,i.kt)("figure",null,(0,i.kt)(a.Z,{align:"center",src:"/img/git-sync/git-sync-workflow.png",alt:"GitHub SSH URL",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"Git Recommended Workflow"))),(0,i.kt)("p",null,"Here, Staging and Production instances are locked for editing. All App changes is done on Development instance and changes are pushed into dev branch in git. Merge request from dev branch should go into staging instance and you should sync all your apps in your staging instance. Once, your Staging instance is working as expected, you should then proceed with merging staging branch into main branch and sync All your Apps in Production instance."),(0,i.kt)("h3",{id:"git-workflow"},"Git Workflow"),(0,i.kt)("mermaid",{value:"gitGraph\n    commit\n    branch staging\n    branch develop\n    checkout develop\n    commit\n    checkout staging\n    merge develop\n    checkout main\n    merge staging\n    checkout develop\n    commit\n    commit\n    checkout staging\n    merge develop\n    checkout main\n    merge staging\n    checkout develop\n    commit\n    commit\n    checkout develop"}),(0,i.kt)("h2",{id:"prerequisite"},"Prerequisite"),(0,i.kt)("p",null,"To connect your apps on DronaHQ with Git, you must have a GitHub account, or any other version control accounts such as GitLab, Bitbucket, etc., and must have basic knowledge of git operations."),(0,i.kt)("h3",{id:"create-ssh-key-in-each-dronahq-instance"},"Create SSH Key in each DronaHQ Instance"),(0,i.kt)("p",null,"You need to create SSH key in each of your DronaHQ instances. Navigate to ",(0,i.kt)("inlineCode",{parentName:"p"},"Profile -> Account Settings -> Integrations -> SSH Key Management -> + Add Key"),". Provide a friendly name and ",(0,i.kt)("inlineCode",{parentName:"p"},"Generate & Save Key"),". Make a note of the friendly name that will be required later for setting up environment variable and public key that will be required for setting up Git repository later."),(0,i.kt)("h3",{id:"setting-up-git-sync-environment-variables"},"Setting up Git Sync Environment Variables"),(0,i.kt)("p",null,"Below Environment variables to be configured -"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Environment Variable"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_IS_GLOBAL"),(0,i.kt)("td",{parentName:"tr",align:null},"This variable specifies if you want to enable Global Git Sync feature. By default it is set to ",(0,i.kt)("inlineCode",{parentName:"td"},"false"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_SSH_REPO_URL"),(0,i.kt)("td",{parentName:"tr",align:null},"SSH Url of the Git Repo which you want all your apps to be checked into. Mandatory if GIT_SYNC_IS_GLOBAL is set to true.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_BRANCH_NAME"),(0,i.kt)("td",{parentName:"tr",align:null},"Branch name of the above repo url which this instance should be synced with. For production instance, ideally use ",(0,i.kt)("inlineCode",{parentName:"td"},"main")," branch.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_AUTH_SSH_KEY_FRIENDLY_NAME"),(0,i.kt)("td",{parentName:"tr",align:null},"Friendly Key name you have used for creating SSH key from SSH Key management. The public key of this friendly key should be added in your GIT repo with read/write rights to above GIT Sync repo.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_IS_AUTO_SAVE"),(0,i.kt)("td",{parentName:"tr",align:null},"Enable this to automatically save your app changes to your GIT repo.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_IS_LOCK_APP_EDIT"),(0,i.kt)("td",{parentName:"tr",align:null},"Enable this to disable editing of you app that is added to GIT. Ideally, you should set to ",(0,i.kt)("inlineCode",{parentName:"td"},"true")," for your production instance and set it to ",(0,i.kt)("inlineCode",{parentName:"td"},"false")," for your development instance.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"GIT_SYNC_CREATE_REPO_ON_APP_ADD"),(0,i.kt)("td",{parentName:"tr",align:null},"Enable this to automatically add new apps to git. Ideally, you should set to ",(0,i.kt)("inlineCode",{parentName:"td"},"true")," for your development instance if you want all apps to be automatically added to git and set it to ",(0,i.kt)("inlineCode",{parentName:"td"},"false")," for your production instance. By default, it is set to ",(0,i.kt)("inlineCode",{parentName:"td"},"false"),".")))),(0,i.kt)("h3",{id:"setup-git-repo"},"Setup Git repo"),(0,i.kt)("p",null,"Various Git providers are supported. For detailed instructions refer ",(0,i.kt)("a",{parentName:"p",href:"#setting-up-on-supported-git-providers"},"here")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Github"),(0,i.kt)("li",{parentName:"ul"},"Gitlab"),(0,i.kt)("li",{parentName:"ul"},"Bitbucket")),(0,i.kt)("h2",{id:"git-sync-in-action"},"Git Sync In Action"),(0,i.kt)("h3",{id:"add-to-git"},"Add to Git"),(0,i.kt)("p",null,"Add to Git option will check in the App's JSON in version control in the following location - ",(0,i.kt)("inlineCode",{parentName:"p"},"App -> <App Name> -> <App name>.json"),".\nIf ",(0,i.kt)("inlineCode",{parentName:"p"},"GIT_SYNC_IS_AUTO_SAVE")," is set to true, any changes you perform in the app will be auto-saved into git with auto-commit message."),(0,i.kt)("div",{style:{position:"relative",paddingBottom:"calc(46.33333333333333% + 41px)",height:0}},(0,i.kt)("iframe",{src:"https://demo.arcade.software/C5Uj84xAqqRAQlYkHIXX?embed",title:"Add to Git",frameborder:"0",loading:"lazy",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",colorScheme:"light"}})),(0,i.kt)("h3",{id:"remove-from-git"},"Remove from Git"),(0,i.kt)("p",null,"Removing from Git will delete the App's entire Folder from git."),(0,i.kt)("div",{style:{position:"relative",paddingBottom:"calc(46.33333333333333% + 41px)",height:0}},(0,i.kt)("iframe",{src:"https://demo.arcade.software/CRRDk1G34oxL5Swn4Ok1?embed",title:"Remove from Git",frameborder:"0",loading:"lazy",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",colorScheme:"light"}})),(0,i.kt)("h3",{id:"push-changes-to-git"},"Push changes to Git"),(0,i.kt)("p",null,"Its recommended to set ",(0,i.kt)("inlineCode",{parentName:"p"},"GIT_SYNC_IS_AUTO_SAVE")," environment variable to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," so that any changes you make in your app is auto-committed into git."),(0,i.kt)("h3",{id:"pull-changes-from-git"},"Pull changes from Git"),(0,i.kt)("p",null,"In case, another user have made updates to the same app, DronaHQ will auto-detect the remote changes and will notify you of the remote changes and will ask you to take update before making any changes in the app. "),(0,i.kt)("figure",null,(0,i.kt)(a.Z,{src:"/img/git-sync/pull-changes.png",alt:"Git Pull Changes",mdxType:"Thumbnail"}),(0,i.kt)("figcaption",{align:"center"},(0,i.kt)("i",null,"Git Pull Changes"))),(0,i.kt)("p",null,"Once the Changes has been pulled successfully, you will see ",(0,i.kt)("inlineCode",{parentName:"p"},"App pull Successful!")," message."),(0,i.kt)("h3",{id:"sync-apps-from-git-repo"},"Sync Apps from Git Repo"),(0,i.kt)("p",null,"When you have multiple instances setup, ",(0,i.kt)("inlineCode",{parentName:"p"},"Sync Apps")," option enables you to sync all your Apps across instances (Newly added, Updated and Delete Apps) from a single overview sidebar."),(0,i.kt)("div",{style:{position:"relative",paddingBottom:"calc(51.19047619047619% + 41px)",height:0}},(0,i.kt)("iframe",{src:"https://demo.arcade.software/eLtQMCvdJeh2YEESi5EG?embed",title:"Sync Apps - Install & Release",frameborder:"0",loading:"lazy",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",colorScheme:"light"}})),(0,i.kt)("p",null,"Below are the various options available"),(0,i.kt)("h4",{id:"apps-added-section"},"APPS ADDED Section"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Install")," option to add this app in current instance."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Install & Release")," option if this app has been published in other instance. This option will add this app in current instance and also publish it for end user.")),(0,i.kt)("h4",{id:"apps-updated-section"},"APPS UPDATED Section"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Update")," option to update this app in the current instance."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Update & Release")," option if this app has been modified and published in other instance. This option will update this app in current instance and also publish it for end user.")),(0,i.kt)("h4",{id:"apps-deleted-section"},"APPS DELETED Section"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"This section lists all the Apps deleted in other instance. You can use ",(0,i.kt)("inlineCode",{parentName:"li"},"Delete")," option to remove this app from the current instance.")),(0,i.kt)("h2",{id:"setting-up-on-supported-git-providers"},"Setting up on supported Git providers"),(0,i.kt)("h3",{id:"adding-ssh-keys-to-git-service-accounts"},"Adding SSH Keys to Git Service Accounts"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"To add this SSH key to your GitHub account, navigate to ",(0,i.kt)("inlineCode",{parentName:"li"},"GitHub > Settings > SSH and GPG Keys > New SSH key"),".")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Provide the required details, including a Title, and paste the SSH key copied from the app in DronaHQ. Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Add SSH key"),". Confirmation and a password prompt may follow.")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The default branch for the connection is main for GitHub.")),(0,i.kt)("h3",{id:"adding-ssh-keys-to-a-particular-github-repository"},"Adding SSH Keys to a particular GitHub Repository"),(0,i.kt)("p",null,"This option is specially helpful for enterprise accounts which do not have access to ",(0,i.kt)("inlineCode",{parentName:"p"},"SSH & GPG Keys")," option in your personal settings."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"To add this SSH key to your GitHub repo, navigate to ",(0,i.kt)("inlineCode",{parentName:"li"},"GitHub -> Repository -> Settings -> Deploy Keys > Add deploy key"),".")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Provide the required details, including a Title, and paste the SSH key copied from the app in DronaHQ. Also enable ",(0,i.kt)("inlineCode",{parentName:"li"},"Allow write access")," checkbox. Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Add key"),". Confirmation and a password prompt may follow.")),(0,i.kt)("h3",{id:"adding-ssh-key-in-gitlab"},"Adding SSH Key in GitLab"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"To add this SSH key to your GitLab account, go to ",(0,i.kt)("inlineCode",{parentName:"li"},"GitLab > User Settings > SSH Keys"),".")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Provide the necessary details, such as Title and Expiry date, and paste the SSH key copied from the app in DronaHQ. Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Add key"),".")),(0,i.kt)("h3",{id:"adding-ssh-key-in-bitbucket"},"Adding SSH Key in Bitbucket"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"To add this SSH key to your Bitbucket account, visit ",(0,i.kt)("inlineCode",{parentName:"li"},"Bitbucket > Settings > SSH Keys (under security) > Add key"),". Note that you need to add the key at the account level, not the repository level.")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Provide the necessary details, including the Label, and paste the SSH key copied from the app in DronaHQ. Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Add key"),".")))}g.isMDXComponent=!0}}]);